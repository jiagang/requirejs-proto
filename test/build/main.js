/*
 Copyright 2013 Daniel Wirtz <dcode@dcode.io>
 Copyright 2009 The Closure Library Authors. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

 http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS-IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
 */

/**
 * @license Long.js (c) 2013 Daniel Wirtz <dcode@dcode.io>
 * Released under the Apache License, Version 2.0
 * see: https://github.com/dcodeIO/Long.js for details
 */

/*
 Copyright 2013-2014 Daniel Wirtz <dcode@dcode.io>

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

 http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
 */

/**
 * @license ByteBuffer.js (c) 2013-2014 Daniel Wirtz <dcode@dcode.io>
 * This version of ByteBuffer.js uses an ArrayBuffer (AB) as its backing buffer and is compatible with modern browsers.
 * Released under the Apache License, Version 2.0
 * see: https://github.com/dcodeIO/ByteBuffer.js for details
 */

/**
         * lxiv-embeddable (c) 2014 Daniel Wirtz <dcode@dcode.io>
         * Released under the Apache License, Version 2.0
         * see: https://github.com/dcodeIO/lxiv for details
         */

/**
         * utfx-embeddable (c) 2014 Daniel Wirtz <dcode@dcode.io>
         * Released under the Apache License, Version 2.0
         * see: https://github.com/dcodeIO/utfx for details
         */

/*
 Copyright 2013 Daniel Wirtz <dcode@dcode.io>

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

 http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
 */

/**
 * @license ProtoBuf.js (c) 2013 Daniel Wirtz <dcode@dcode.io>
 * Released under the Apache License, Version 2.0
 * see: https://github.com/dcodeIO/ProtoBuf.js for details
 */

define("text",{}),function(e){var t=function(e,t,n){this.low=e|0,this.high=t|0,this.unsigned=!!n};t.isLong=function(e){return(e&&e instanceof t)===!0};var n={},r={};t.fromInt=function(e,i){var s,o;if(!i){e|=0;if(-128<=e&&e<128){o=n[e];if(o)return o}return s=new t(e,e<0?-1:0,!1),-128<=e&&e<128&&(n[e]=s),s}e>>>=0;if(0<=e&&e<256){o=r[e];if(o)return o}return s=new t(e,(e|0)<0?-1:0,!0),0<=e&&e<256&&(r[e]=s),s},t.fromNumber=function(e,n){return n=!!n,isNaN(e)||!isFinite(e)?t.ZERO:!n&&e<=-a?t.MIN_VALUE:!n&&e+1>=a?t.MAX_VALUE:n&&e>=u?t.MAX_UNSIGNED_VALUE:e<0?t.fromNumber(-e,n).negate():new t(e%o|0,e/o|0,n)},t.fromBits=function(e,n,r){return new t(e,n,r)},t.fromString=function(e,n,r){if(e.length===0)throw Error("number format error: empty string");if(e==="NaN"||e==="Infinity"||e==="+Infinity"||e==="-Infinity")return t.ZERO;typeof n=="number"&&(r=n,n=!1),r=r||10;if(r<2||36<r)throw Error("radix out of range: "+r);var i;if((i=e.indexOf("-"))>0)throw Error('number format error: interior "-" character: '+e);if(i===0)return t.fromString(e.substring(1),n,r).negate();var s=t.fromNumber(Math.pow(r,8)),o=t.ZERO;for(var u=0;u<e.length;u+=8){var a=Math.min(8,e.length-u),f=parseInt(e.substring(u,u+a),r);if(a<8){var l=t.fromNumber(Math.pow(r,a));o=o.multiply(l).add(t.fromNumber(f))}else o=o.multiply(s),o=o.add(t.fromNumber(f))}return o.unsigned=n,o},t.fromValue=function(e){return typeof e=="number"?t.fromNumber(e):typeof e=="string"?t.fromString(e):t.isLong(e)?e:new t(e.low,e.high,e.unsigned)};var i=65536,s=1<<24,o=i*i,u=o*o,a=u/2,f=t.fromInt(s);t.ZERO=t.fromInt(0),t.UZERO=t.fromInt(0,!0),t.ONE=t.fromInt(1),t.UONE=t.fromInt(1,!0),t.NEG_ONE=t.fromInt(-1),t.MAX_VALUE=t.fromBits(-1,2147483647,!1),t.MAX_UNSIGNED_VALUE=t.fromBits(-1,-1,!0),t.MIN_VALUE=t.fromBits(0,-2147483648,!1),t.prototype.toInt=function(){return this.unsigned?this.low>>>0:this.low},t.prototype.toNumber=function(){return this.unsigned?(this.high>>>0)*o+(this.low>>>0):this.high*o+(this.low>>>0)},t.prototype.toString=function(e){e=e||10;if(e<2||36<e)throw RangeError("radix out of range: "+e);if(this.isZero())return"0";var n;if(this.isNegative()){if(this.equals(t.MIN_VALUE)){var r=t.fromNumber(e),i=this.div(r);return n=i.multiply(r).subtract(this),i.toString(e)+n.toInt().toString(e)}return"-"+this.negate().toString(e)}var s=t.fromNumber(Math.pow(e,6),this.unsigned);n=this;var o="";for(;;){var u=n.div(s),a=n.subtract(u.multiply(s)).toInt()>>>0,f=a.toString(e);n=u;if(n.isZero())return f+o;while(f.length<6)f="0"+f;o=""+f+o}},t.prototype.getHighBits=function(){return this.high},t.prototype.getHighBitsUnsigned=function(){return this.high>>>0},t.prototype.getLowBits=function(){return this.low},t.prototype.getLowBitsUnsigned=function(){return this.low>>>0},t.prototype.getNumBitsAbs=function(){if(this.isNegative())return this.equals(t.MIN_VALUE)?64:this.negate().getNumBitsAbs();var e=this.high!=0?this.high:this.low;for(var n=31;n>0;n--)if((e&1<<n)!=0)break;return this.high!=0?n+33:n+1},t.prototype.isZero=function(){return this.high===0&&this.low===0},t.prototype.isNegative=function(){return!this.unsigned&&this.high<0},t.prototype.isPositive=function(){return this.unsigned||this.high>=0},t.prototype.isOdd=function(){return(this.low&1)===1},t.prototype.isEven=function(){return(this.low&1)===0},t.prototype.equals=function(e){return t.isLong(e)||(e=t.fromValue(e)),this.unsigned!==e.unsigned&&this.high>>>31===1&&e.high>>>31===1?!1:this.high===e.high&&this.low===e.low},t.prototype.notEquals=function(e){return t.isLong(e)||(e=t.fromValue(e)),!this.equals(e)},t.prototype.lessThan=function(e){return t.isLong(e)||(e=t.fromValue(e)),this.compare(e)<0},t.prototype.lessThanOrEqual=function(e){return t.isLong(e)||(e=t.fromValue(e)),this.compare(e)<=0},t.prototype.greaterThan=function(e){return t.isLong(e)||(e=t.fromValue(e)),this.compare(e)>0},t.prototype.greaterThanOrEqual=function(e){return this.compare(e)>=0},t.prototype.compare=function(e){if(this.equals(e))return 0;var t=this.isNegative(),n=e.isNegative();return t&&!n?-1:!t&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.subtract(e).isNegative()?-1:1},t.prototype.negate=function(){return!this.unsigned&&this.equals(t.MIN_VALUE)?t.MIN_VALUE:this.not().add(t.ONE)},t.prototype.add=function(e){t.isLong(e)||(e=t.fromValue(e));var n=this.high>>>16,r=this.high&65535,i=this.low>>>16,s=this.low&65535,o=e.high>>>16,u=e.high&65535,a=e.low>>>16,f=e.low&65535,l=0,c=0,h=0,p=0;return p+=s+f,h+=p>>>16,p&=65535,h+=i+a,c+=h>>>16,h&=65535,c+=r+u,l+=c>>>16,c&=65535,l+=n+o,l&=65535,t.fromBits(h<<16|p,l<<16|c,this.unsigned)},t.prototype.subtract=function(e){return t.isLong(e)||(e=t.fromValue(e)),this.add(e.negate())},t.prototype.multiply=function(e){if(this.isZero())return t.ZERO;t.isLong(e)||(e=t.fromValue(e));if(e.isZero())return t.ZERO;if(this.equals(t.MIN_VALUE))return e.isOdd()?t.MIN_VALUE:t.ZERO;if(e.equals(t.MIN_VALUE))return this.isOdd()?t.MIN_VALUE:t.ZERO;if(this.isNegative())return e.isNegative()?this.negate().multiply(e.negate()):this.negate().multiply(e).negate();if(e.isNegative())return this.multiply(e.negate()).negate();if(this.lessThan(f)&&e.lessThan(f))return t.fromNumber(this.toNumber()*e.toNumber(),this.unsigned);var n=this.high>>>16,r=this.high&65535,i=this.low>>>16,s=this.low&65535,o=e.high>>>16,u=e.high&65535,a=e.low>>>16,l=e.low&65535,c=0,h=0,p=0,d=0;return d+=s*l,p+=d>>>16,d&=65535,p+=i*l,h+=p>>>16,p&=65535,p+=s*a,h+=p>>>16,p&=65535,h+=r*l,c+=h>>>16,h&=65535,h+=i*a,c+=h>>>16,h&=65535,h+=s*u,c+=h>>>16,h&=65535,c+=n*l+r*a+i*u+s*o,c&=65535,t.fromBits(p<<16|d,c<<16|h,this.unsigned)},t.prototype.div=function(e){t.isLong(e)||(e=t.fromValue(e));if(e.isZero())throw new Error("division by zero");if(this.isZero())return this.unsigned?t.UZERO:t.ZERO;var n,r,i;if(this.equals(t.MIN_VALUE)){if(e.equals(t.ONE)||e.equals(t.NEG_ONE))return t.MIN_VALUE;if(e.equals(t.MIN_VALUE))return t.ONE;var s=this.shiftRight(1);return n=s.div(e).shiftLeft(1),n.equals(t.ZERO)?e.isNegative()?t.ONE:t.NEG_ONE:(r=this.subtract(e.multiply(n)),i=n.add(r.div(e)),i)}if(e.equals(t.MIN_VALUE))return this.unsigned?t.UZERO:t.ZERO;if(this.isNegative())return e.isNegative()?this.negate().div(e.negate()):this.negate().div(e).negate();if(e.isNegative())return this.div(e.negate()).negate();i=t.ZERO,r=this;while(r.greaterThanOrEqual(e)){n=Math.max(1,Math.floor(r.toNumber()/e.toNumber()));var o=Math.ceil(Math.log(n)/Math.LN2),u=o<=48?1:Math.pow(2,o-48),a=t.fromNumber(n),f=a.multiply(e);while(f.isNegative()||f.greaterThan(r))n-=u,a=t.fromNumber(n,this.unsigned),f=a.multiply(e);a.isZero()&&(a=t.ONE),i=i.add(a),r=r.subtract(f)}return i},t.prototype.modulo=function(e){return t.isLong(e)||(e=t.fromValue(e)),this.subtract(this.div(e).multiply(e))},t.prototype.not=function(){return t.fromBits(~this.low,~this.high,this.unsigned)},t.prototype.and=function(e){return t.isLong(e)||(e=t.fromValue(e)),t.fromBits(this.low&e.low,this.high&e.high,this.unsigned)},t.prototype.or=function(e){return t.isLong(e)||(e=t.fromValue(e)),t.fromBits(this.low|e.low,this.high|e.high,this.unsigned)},t.prototype.xor=function(e){return t.isLong(e)||(e=t.fromValue(e)),t.fromBits(this.low^e.low,this.high^e.high,this.unsigned)},t.prototype.shiftLeft=function(e){return t.isLong(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?t.fromBits(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):t.fromBits(0,this.low<<e-32,this.unsigned)},t.prototype.shiftRight=function(e){return t.isLong(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?t.fromBits(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):t.fromBits(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},t.prototype.shiftRightUnsigned=function(e){t.isLong(e)&&(e=e.toInt()),e&=63;if(e===0)return this;var n=this.high;if(e<32){var r=this.low;return t.fromBits(r>>>e|n<<32-e,n>>>e,this.unsigned)}return e===32?t.fromBits(n,0,this.unsigned):t.fromBits(n>>>e-32,0,this.unsigned)},t.prototype.toSigned=function(){return this.unsigned?new t(this.low,this.high,!1):this},t.prototype.toUnsigned=function(){return this.unsigned?this:new t(this.low,this.high,!0)},typeof require=="function"&&typeof module=="object"&&module&&typeof exports=="object"&&exports?module.exports=t:typeof define=="function"&&define.amd?define("Long",[],function(){return t}):(e.dcodeIO=e.dcodeIO||{}).Long=t}(this),function(e){function t(e){function o(e){var t=0;return function(){return t<e.length?e.charCodeAt(t++):null}}function u(){var e=[],t=[];return function(){if(arguments.length===0)return t.join("")+s.apply(String,e);e.length+arguments.length>1024&&(t.push(s.apply(String,e)),e.length=0),Array.prototype.push.apply(e,arguments)}}var t=function(e,n,i){typeof e=="undefined"&&(e=t.DEFAULT_CAPACITY),typeof n=="undefined"&&(n=t.DEFAULT_ENDIAN),typeof i=="undefined"&&(i=t.DEFAULT_NOASSERT);if(!i){e|=0;if(e<0)throw RangeError("Illegal capacity");n=!!n,i=!!i}this.buffer=e===0?r:new ArrayBuffer(e),this.view=e===0?null:new DataView(this.buffer),this.offset=0,this.markedOffset=-1,this.limit=e,this.littleEndian=typeof n!="undefined"?!!n:!1,this.noAssert=!!i};t.VERSION="3.5.4",t.LITTLE_ENDIAN=!0,t.BIG_ENDIAN=!1,t.DEFAULT_CAPACITY=16,t.DEFAULT_ENDIAN=t.BIG_ENDIAN,t.DEFAULT_NOASSERT=!1,t.Long=e||null;var n=t.prototype,r=new ArrayBuffer(0),s=String.fromCharCode;t.allocate=function(e,n,r){return new t(e,n,r)},t.concat=function(e,n,r,i){if(typeof n=="boolean"||typeof n!="string")i=r,r=n,n=undefined;var s=0;for(var o=0,u=e.length,a;o<u;++o)t.isByteBuffer(e[o])||(e[o]=t.wrap(e[o],n)),a=e[o].limit-e[o].offset,a>0&&(s+=a);if(s===0)return new t(0,r,i);var f=new t(s,r,i),l,c=new Uint8Array(f.buffer);o=0;while(o<u){l=e[o++],a=l.limit-l.offset;if(a<=0)continue;c.set((new Uint8Array(l.buffer)).subarray(l.offset,l.limit),f.offset),f.offset+=a}return f.limit=f.offset,f.offset=0,f},t.isByteBuffer=function(e){return(e&&e instanceof t)===!0},t.type=function(){return ArrayBuffer},t.wrap=function(e,r,s,o){typeof r!="string"&&(o=s,s=r,r=undefined);if(typeof e=="string"){typeof r=="undefined"&&(r="utf8");switch(r){case"base64":return t.fromBase64(e,s);case"hex":return t.fromHex(e,s);case"binary":return t.fromBinary(e,s);case"utf8":return t.fromUTF8(e,s);case"debug":return t.fromDebug(e,s);default:throw Error("Unsupported encoding: "+r)}}if(e===null||typeof e!="object")throw TypeError("Illegal buffer");var u;if(t.isByteBuffer(e))return u=n.clone.call(e),u.markedOffset=-1,u;if(e instanceof Uint8Array)u=new t(0,s,o),e.length>0&&(u.buffer=e.buffer,u.offset=e.byteOffset,u.limit=e.byteOffset+e.length,u.view=e.length>0?new DataView(e.buffer):null);else if(e instanceof ArrayBuffer)u=new t(0,s,o),e.byteLength>0&&(u.buffer=e,u.offset=0,u.limit=e.byteLength,u.view=e.byteLength>0?new DataView(e):null);else{if(Object.prototype.toString.call(e)!=="[object Array]")throw TypeError("Illegal buffer");u=new t(e.length,s,o),u.limit=e.length;for(i=0;i<e.length;++i)u.view.setUint8(i,e[i])}return u},n.writeInt8=function(e,t){var n=typeof t=="undefined";n&&(t=this.offset);if(!this.noAssert){if(typeof e!="number"||e%1!==0)throw TypeError("Illegal value: "+e+" (not an integer)");e|=0;if(typeof t!="number"||t%1!==0)throw TypeError("Illegal offset: "+t+" (not an integer)");t>>>=0;if(t<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+"+0+") <= "+this.buffer.byteLength)}t+=1;var r=this.buffer.byteLength;return t>r&&this.resize((r*=2)>t?r:t),t-=1,this.view.setInt8(t,e),n&&(this.offset+=1),this},n.writeByte=n.writeInt8,n.readInt8=function(e){var t=typeof e=="undefined";t&&(e=this.offset);if(!this.noAssert){if(typeof e!="number"||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");e>>>=0;if(e<0||e+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+"+1+") <= "+this.buffer.byteLength)}var n=this.view.getInt8(e);return t&&(this.offset+=1),n},n.readByte=n.readInt8,n.writeUint8=function(e,t){var n=typeof t=="undefined";n&&(t=this.offset);if(!this.noAssert){if(typeof e!="number"||e%1!==0)throw TypeError("Illegal value: "+e+" (not an integer)");e>>>=0;if(typeof t!="number"||t%1!==0)throw TypeError("Illegal offset: "+t+" (not an integer)");t>>>=0;if(t<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+"+0+") <= "+this.buffer.byteLength)}t+=1;var r=this.buffer.byteLength;return t>r&&this.resize((r*=2)>t?r:t),t-=1,this.view.setUint8(t,e),n&&(this.offset+=1),this},n.readUint8=function(e){var t=typeof e=="undefined";t&&(e=this.offset);if(!this.noAssert){if(typeof e!="number"||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");e>>>=0;if(e<0||e+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+"+1+") <= "+this.buffer.byteLength)}var n=this.view.getUint8(e);return t&&(this.offset+=1),n},n.writeInt16=function(e,t){var n=typeof t=="undefined";n&&(t=this.offset);if(!this.noAssert){if(typeof e!="number"||e%1!==0)throw TypeError("Illegal value: "+e+" (not an integer)");e|=0;if(typeof t!="number"||t%1!==0)throw TypeError("Illegal offset: "+t+" (not an integer)");t>>>=0;if(t<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+"+0+") <= "+this.buffer.byteLength)}t+=2;var r=this.buffer.byteLength;return t>r&&this.resize((r*=2)>t?r:t),t-=2,this.view.setInt16(t,e,this.littleEndian),n&&(this.offset+=2),this},n.writeShort=n.writeInt16,n.readInt16=function(e){var t=typeof e=="undefined";t&&(e=this.offset);if(!this.noAssert){if(typeof e!="number"||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");e>>>=0;if(e<0||e+2>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+"+2+") <= "+this.buffer.byteLength)}var n=this.view.getInt16(e,this.littleEndian);return t&&(this.offset+=2),n},n.readShort=n.readInt16,n.writeUint16=function(e,t){var n=typeof t=="undefined";n&&(t=this.offset);if(!this.noAssert){if(typeof e!="number"||e%1!==0)throw TypeError("Illegal value: "+e+" (not an integer)");e>>>=0;if(typeof t!="number"||t%1!==0)throw TypeError("Illegal offset: "+t+" (not an integer)");t>>>=0;if(t<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+"+0+") <= "+this.buffer.byteLength)}t+=2;var r=this.buffer.byteLength;return t>r&&this.resize((r*=2)>t?r:t),t-=2,this.view.setUint16(t,e,this.littleEndian),n&&(this.offset+=2),this},n.readUint16=function(e){var t=typeof e=="undefined";t&&(e=this.offset);if(!this.noAssert){if(typeof e!="number"||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");e>>>=0;if(e<0||e+2>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+"+2+") <= "+this.buffer.byteLength)}var n=this.view.getUint16(e,this.littleEndian);return t&&(this.offset+=2),n},n.writeInt32=function(e,t){var n=typeof t=="undefined";n&&(t=this.offset);if(!this.noAssert){if(typeof e!="number"||e%1!==0)throw TypeError("Illegal value: "+e+" (not an integer)");e|=0;if(typeof t!="number"||t%1!==0)throw TypeError("Illegal offset: "+t+" (not an integer)");t>>>=0;if(t<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+"+0+") <= "+this.buffer.byteLength)}t+=4;var r=this.buffer.byteLength;return t>r&&this.resize((r*=2)>t?r:t),t-=4,this.view.setInt32(t,e,this.littleEndian),n&&(this.offset+=4),this},n.writeInt=n.writeInt32,n.readInt32=function(e){var t=typeof e=="undefined";t&&(e=this.offset);if(!this.noAssert){if(typeof e!="number"||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");e>>>=0;if(e<0||e+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+"+4+") <= "+this.buffer.byteLength)}var n=this.view.getInt32(e,this.littleEndian);return t&&(this.offset+=4),n},n.readInt=n.readInt32,n.writeUint32=function(e,t){var n=typeof t=="undefined";n&&(t=this.offset);if(!this.noAssert){if(typeof e!="number"||e%1!==0)throw TypeError("Illegal value: "+e+" (not an integer)");e>>>=0;if(typeof t!="number"||t%1!==0)throw TypeError("Illegal offset: "+t+" (not an integer)");t>>>=0;if(t<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+"+0+") <= "+this.buffer.byteLength)}t+=4;var r=this.buffer.byteLength;return t>r&&this.resize((r*=2)>t?r:t),t-=4,this.view.setUint32(t,e,this.littleEndian),n&&(this.offset+=4),this},n.readUint32=function(e){var t=typeof e=="undefined";t&&(e=this.offset);if(!this.noAssert){if(typeof e!="number"||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");e>>>=0;if(e<0||e+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+"+4+") <= "+this.buffer.byteLength)}var n=this.view.getUint32(e,this.littleEndian);return t&&(this.offset+=4),n},e&&(n.writeInt64=function(t,n){var r=typeof n=="undefined";r&&(n=this.offset);if(!this.noAssert){if(typeof t=="number")t=e.fromNumber(t);else if(!(t&&t instanceof e))throw TypeError("Illegal value: "+t+" (not an integer or Long)");if(typeof n!="number"||n%1!==0)throw TypeError("Illegal offset: "+n+" (not an integer)");n>>>=0;if(n<0||n+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+n+" (+"+0+") <= "+this.buffer.byteLength)}typeof t=="number"&&(t=e.fromNumber(t)),n+=8;var i=this.buffer.byteLength;return n>i&&this.resize((i*=2)>n?i:n),n-=8,this.littleEndian?(this.view.setInt32(n,t.low,!0),this.view.setInt32(n+4,t.high,!0)):(this.view.setInt32(n,t.high,!1),this.view.setInt32(n+4,t.low,!1)),r&&(this.offset+=8),this},n.writeLong=n.writeInt64,n.readInt64=function(t){var n=typeof t=="undefined";n&&(t=this.offset);if(!this.noAssert){if(typeof t!="number"||t%1!==0)throw TypeError("Illegal offset: "+t+" (not an integer)");t>>>=0;if(t<0||t+8>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+"+8+") <= "+this.buffer.byteLength)}var r=this.littleEndian?new e(this.view.getInt32(t,!0),this.view.getInt32(t+4,!0),!1):new e(this.view.getInt32(t+4,!1),this.view.getInt32(t,!1),!1);return n&&(this.offset+=8),r},n.readLong=n.readInt64,n.writeUint64=function(t,n){var r=typeof n=="undefined";r&&(n=this.offset);if(!this.noAssert){if(typeof t=="number")t=e.fromNumber(t);else if(!(t&&t instanceof e))throw TypeError("Illegal value: "+t+" (not an integer or Long)");if(typeof n!="number"||n%1!==0)throw TypeError("Illegal offset: "+n+" (not an integer)");n>>>=0;if(n<0||n+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+n+" (+"+0+") <= "+this.buffer.byteLength)}typeof t=="number"&&(t=e.fromNumber(t)),n+=8;var i=this.buffer.byteLength;return n>i&&this.resize((i*=2)>n?i:n),n-=8,this.littleEndian?(this.view.setInt32(n,t.low,!0),this.view.setInt32(n+4,t.high,!0)):(this.view.setInt32(n,t.high,!1),this.view.setInt32(n+4,t.low,!1)),r&&(this.offset+=8),this},n.readUint64=function(t){var n=typeof t=="undefined";n&&(t=this.offset);if(!this.noAssert){if(typeof t!="number"||t%1!==0)throw TypeError("Illegal offset: "+t+" (not an integer)");t>>>=0;if(t<0||t+8>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+"+8+") <= "+this.buffer.byteLength)}var r=this.littleEndian?new e(this.view.getInt32(t,!0),this.view.getInt32(t+4,!0),!0):new e(this.view.getInt32(t+4,!1),this.view.getInt32(t,!1),!0);return n&&(this.offset+=8),r}),n.writeFloat32=function(e,t){var n=typeof t=="undefined";n&&(t=this.offset);if(!this.noAssert){if(typeof e!="number")throw TypeError("Illegal value: "+e+" (not a number)");if(typeof t!="number"||t%1!==0)throw TypeError("Illegal offset: "+t+" (not an integer)");t>>>=0;if(t<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+"+0+") <= "+this.buffer.byteLength)}t+=4;var r=this.buffer.byteLength;return t>r&&this.resize((r*=2)>t?r:t),t-=4,this.view.setFloat32(t,e,this.littleEndian),n&&(this.offset+=4),this},n.writeFloat=n.writeFloat32,n.readFloat32=function(e){var t=typeof e=="undefined";t&&(e=this.offset);if(!this.noAssert){if(typeof e!="number"||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");e>>>=0;if(e<0||e+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+"+4+") <= "+this.buffer.byteLength)}var n=this.view.getFloat32(e,this.littleEndian);return t&&(this.offset+=4),n},n.readFloat=n.readFloat32,n.writeFloat64=function(e,t){var n=typeof t=="undefined";n&&(t=this.offset);if(!this.noAssert){if(typeof e!="number")throw TypeError("Illegal value: "+e+" (not a number)");if(typeof t!="number"||t%1!==0)throw TypeError("Illegal offset: "+t+" (not an integer)");t>>>=0;if(t<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+"+0+") <= "+this.buffer.byteLength)}t+=8;var r=this.buffer.byteLength;return t>r&&this.resize((r*=2)>t?r:t),t-=8,this.view.setFloat64(t,e,this.littleEndian),n&&(this.offset+=8),this},n.writeDouble=n.writeFloat64,n.readFloat64=function(e){var t=typeof e=="undefined";t&&(e=this.offset);if(!this.noAssert){if(typeof e!="number"||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");e>>>=0;if(e<0||e+8>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+"+8+") <= "+this.buffer.byteLength)}var n=this.view.getFloat64(e,this.littleEndian);return t&&(this.offset+=8),n},n.readDouble=n.readFloat64,t.MAX_VARINT32_BYTES=5,t.calculateVarint32=function(e){return e>>>=0,e<128?1:e<16384?2:e<1<<21?3:e<1<<28?4:5},t.zigZagEncode32=function(e){return((e|=0)<<1^e>>31)>>>0},t.zigZagDecode32=function(e){return e>>>1^-(e&1)|0},n.writeVarint32=function(e,n){var r=typeof n=="undefined";r&&(n=this.offset);if(!this.noAssert){if(typeof e!="number"||e%1!==0)throw TypeError("Illegal value: "+e+" (not an integer)");e|=0;if(typeof n!="number"||n%1!==0)throw TypeError("Illegal offset: "+n+" (not an integer)");n>>>=0;if(n<0||n+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+n+" (+"+0+") <= "+this.buffer.byteLength)}var i=t.calculateVarint32(e),s;n+=i;var o=this.buffer.byteLength;return n>o&&this.resize((o*=2)>n?o:n),n-=i,this.view.setUint8(n,s=e|128),e>>>=0,e>=128?(s=e>>7|128,this.view.setUint8(n+1,s),e>=16384?(s=e>>14|128,this.view.setUint8(n+2,s),e>=1<<21?(s=e>>21|128,this.view.setUint8(n+3,s),e>=1<<28?(this.view.setUint8(n+4,e>>28&15),i=5):(this.view.setUint8(n+3,s&127),i=4)):(this.view.setUint8(n+2,s&127),i=3)):(this.view.setUint8(n+1,s&127),i=2)):(this.view.setUint8(n,s&127),i=1),r?(this.offset+=i,this):i},n.writeVarint32ZigZag=function(e,n){return this.writeVarint32(t.zigZagEncode32(e),n)},n.readVarint32=function(e){var t=typeof e=="undefined";t&&(e=this.offset);if(!this.noAssert){if(typeof e!="number"||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");e>>>=0;if(e<0||e+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+"+1+") <= "+this.buffer.byteLength)}var n=0,r=0,i,s;do{s=e+n;if(!this.noAssert&&s>this.limit){var o=Error("Truncated");throw o.truncated=!0,o}i=this.view.getUint8(s),n<5&&(r|=(i&127)<<7*n>>>0),++n}while((i&128)===128);return r|=0,t?(this.offset+=n,r):{value:r,length:n}},n.readVarint32ZigZag=function(e){var n=this.readVarint32(e);return typeof n=="object"?n.value=t.zigZagDecode32(n.value):n=t.zigZagDecode32(n),n},e&&(t.MAX_VARINT64_BYTES=10,t.calculateVarint64=function(t){typeof t=="number"&&(t=e.fromNumber(t));var n=t.toInt()>>>0,r=t.shiftRightUnsigned(28).toInt()>>>0,i=t.shiftRightUnsigned(56).toInt()>>>0;return i==0?r==0?n<16384?n<128?1:2:n<1<<21?3:4:r<16384?r<128?5:6:r<1<<21?7:8:i<128?9:10},t.zigZagEncode64=function(t){return typeof t=="number"?t=e.fromNumber(t,!1):t.unsigned!==!1&&(t=t.toSigned()),t.shiftLeft(1).xor(t.shiftRight(63)).toUnsigned()},t.zigZagDecode64=function(t){return typeof t=="number"?t=e.fromNumber(t,!1):t.unsigned!==!1&&(t=t.toSigned()),t.shiftRightUnsigned(1).xor(t.and(e.ONE).toSigned().negate()).toSigned()},n.writeVarint64=function(n,r){var i=typeof r=="undefined";i&&(r=this.offset);if(!this.noAssert){if(typeof n=="number")n=e.fromNumber(n);else if(!(n&&n instanceof e))throw TypeError("Illegal value: "+n+" (not an integer or Long)");if(typeof r!="number"||r%1!==0)throw TypeError("Illegal offset: "+r+" (not an integer)");r>>>=0;if(r<0||r+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+r+" (+"+0+") <= "+this.buffer.byteLength)}typeof n=="number"?n=e.fromNumber(n,!1):n.unsigned!==!1&&(n=n.toSigned());var s=t.calculateVarint64(n),o=n.toInt()>>>0,u=n.shiftRightUnsigned(28).toInt()>>>0,a=n.shiftRightUnsigned(56).toInt()>>>0;r+=s;var f=this.buffer.byteLength;r>f&&this.resize((f*=2)>r?f:r),r-=s;switch(s){case 10:this.view.setUint8(r+9,a>>>7&1);case 9:this.view.setUint8(r+8,s!==9?a|128:a&127);case 8:this.view.setUint8(r+7,s!==8?u>>>21|128:u>>>21&127);case 7:this.view.setUint8(r+6,s!==7?u>>>14|128:u>>>14&127);case 6:this.view.setUint8(r+5,s!==6?u>>>7|128:u>>>7&127);case 5:this.view.setUint8(r+4,s!==5?u|128:u&127);case 4:this.view.setUint8(r+3,s!==4?o>>>21|128:o>>>21&127);case 3:this.view.setUint8(r+2,s!==3?o>>>14|128:o>>>14&127);case 2:this.view.setUint8(r+1,s!==2?o>>>7|128:o>>>7&127);case 1:this.view.setUint8(r,s!==1?o|128:o&127)}return i?(this.offset+=s,this):s},n.writeVarint64ZigZag=function(e,n){return this.writeVarint64(t.zigZagEncode64(e),n)},n.readVarint64=function(t){var n=typeof t=="undefined";n&&(t=this.offset);if(!this.noAssert){if(typeof t!="number"||t%1!==0)throw TypeError("Illegal offset: "+t+" (not an integer)");t>>>=0;if(t<0||t+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+"+1+") <= "+this.buffer.byteLength)}var r=t,i=0,s=0,o=0,u=0;u=this.view.getUint8(t++),i=u&127;if(u&128){u=this.view.getUint8(t++),i|=(u&127)<<7;if(u&128){u=this.view.getUint8(t++),i|=(u&127)<<14;if(u&128){u=this.view.getUint8(t++),i|=(u&127)<<21;if(u&128){u=this.view.getUint8(t++),s=u&127;if(u&128){u=this.view.getUint8(t++),s|=(u&127)<<7;if(u&128){u=this.view.getUint8(t++),s|=(u&127)<<14;if(u&128){u=this.view.getUint8(t++),s|=(u&127)<<21;if(u&128){u=this.view.getUint8(t++),o=u&127;if(u&128){u=this.view.getUint8(t++),o|=(u&127)<<7;if(u&128)throw Error("Buffer overrun")}}}}}}}}}var a=e.fromBits(i|s<<28,s>>>4|o<<24,!1);return n?(this.offset=t,a):{value:a,length:t-r}},n.readVarint64ZigZag=function(n){var r=this.readVarint64(n);return r&&r.value instanceof e?r.value=t.zigZagDecode64(r.value):r=t.zigZagDecode64(r),r}),n.writeCString=function(e,t){var n=typeof t=="undefined";n&&(t=this.offset);var r,i=e.length;if(!this.noAssert){if(typeof e!="string")throw TypeError("Illegal str: Not a string");for(r=0;r<i;++r)if(e.charCodeAt(r)===0)throw RangeError("Illegal str: Contains NULL-characters");if(typeof t!="number"||t%1!==0)throw TypeError("Illegal offset: "+t+" (not an integer)");t>>>=0;if(t<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+"+0+") <= "+this.buffer.byteLength)}var s=t;i=f.calculateUTF16asUTF8(o(e))[1],t+=i+1;var u=this.buffer.byteLength;return t>u&&this.resize((u*=2)>t?u:t),t-=i+1,f.encodeUTF16toUTF8(o(e),function(e){this.view.setUint8(t++,e)}.bind(this)),this.view.setUint8(t++,0),n?(this.offset=t-s,this):i},n.readCString=function(e){var t=typeof e=="undefined";t&&(e=this.offset);if(!this.noAssert){if(typeof e!="number"||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");e>>>=0;if(e<0||e+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+"+1+") <= "+this.buffer.byteLength)}var n=e,r,i,s=-1;return f.decodeUTF8toUTF16(function(){if(s===0)return null;if(e>=this.limit)throw RangeError("Illegal range: Truncated data, "+e+" < "+this.limit);return(s=this.view.getUint8(e++))===0?null:s}.bind(this),i=u(),!0),t?(this.offset=e,i()):{string:i(),length:e-n}},n.writeIString=function(e,t){var n=typeof t=="undefined";n&&(t=this.offset);if(!this.noAssert){if(typeof e!="string")throw TypeError("Illegal str: Not a string");if(typeof t!="number"||t%1!==0)throw TypeError("Illegal offset: "+t+" (not an integer)");t>>>=0;if(t<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+"+0+") <= "+this.buffer.byteLength)}var r=t,i;i=f.calculateUTF16asUTF8(o(e),this.noAssert)[1],t+=4+i;var s=this.buffer.byteLength;t>s&&this.resize((s*=2)>t?s:t),t-=4+i,this.view.setUint32(t,i,this.littleEndian),t+=4,f.encodeUTF16toUTF8(o(e),function(e){this.view.setUint8(t++,e)}.bind(this));if(t!==r+4+i)throw RangeError("Illegal range: Truncated data, "+t+" == "+(t+4+i));return n?(this.offset=t,this):t-r},n.readIString=function(e){var t=typeof e=="undefined";t&&(e=this.offset);if(!this.noAssert){if(typeof e!="number"||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");e>>>=0;if(e<0||e+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+"+4+") <= "+this.buffer.byteLength)}var n=0,r=e,i;n=this.view.getUint32(e,this.littleEndian),e+=4;var s=e+n,o;return f.decodeUTF8toUTF16(function(){return e<s?this.view.getUint8(e++):null}.bind(this),o=u(),this.noAssert),i=o(),t?(this.offset=e,i):{string:i,length:e-r}},t.METRICS_CHARS="c",t.METRICS_BYTES="b",n.writeUTF8String=function(e,t){var n=typeof t=="undefined";n&&(t=this.offset);if(!this.noAssert){if(typeof t!="number"||t%1!==0)throw TypeError("Illegal offset: "+t+" (not an integer)");t>>>=0;if(t<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+"+0+") <= "+this.buffer.byteLength)}var r,i=t;r=f.calculateUTF16asUTF8(o(e))[1],t+=r;var s=this.buffer.byteLength;return t>s&&this.resize((s*=2)>t?s:t),t-=r,f.encodeUTF16toUTF8(o(e),function(e){this.view.setUint8(t++,e)}.bind(this)),n?(this.offset=t,this):t-i},n.writeString=n.writeUTF8String,t.calculateUTF8Chars=function(e){return f.calculateUTF16asUTF8(o(e))[0]},t.calculateUTF8Bytes=function(e){return f.calculateUTF16asUTF8(o(e))[1]},n.readUTF8String=function(e,n,r){typeof n=="number"&&(r=n,n=undefined);var i=typeof r=="undefined";i&&(r=this.offset),typeof n=="undefined"&&(n=t.METRICS_CHARS);if(!this.noAssert){if(typeof e!="number"||e%1!==0)throw TypeError("Illegal length: "+e+" (not an integer)");e|=0;if(typeof r!="number"||r%1!==0)throw TypeError("Illegal offset: "+r+" (not an integer)");r>>>=0;if(r<0||r+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+r+" (+"+0+") <= "+this.buffer.byteLength)}var s=0,o=r,a;if(n===t.METRICS_CHARS){a=u(),f.decodeUTF8(function(){return s<e&&r<this.limit?this.view.getUint8(r++):null}.bind(this),function(e){++s,f.UTF8toUTF16(e,a)}.bind(this));if(s!==e)throw RangeError("Illegal range: Truncated data, "+s+" == "+e);return i?(this.offset=r,a()):{string:a(),length:r-o}}if(n===t.METRICS_BYTES){if(!this.noAssert){if(typeof r!="number"||r%1!==0)throw TypeError("Illegal offset: "+r+" (not an integer)");r>>>=0;if(r<0||r+e>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+r+" (+"+e+") <= "+this.buffer.byteLength)}var l=r+e;f.decodeUTF8toUTF16(function(){return r<l?this.view.getUint8(r++):null}.bind(this),a=u(),this.noAssert);if(r!==l)throw RangeError("Illegal range: Truncated data, "+r+" == "+l);return i?(this.offset=r,a()):{string:a(),length:r-o}}throw TypeError("Unsupported metrics: "+n)},n.readString=n.readUTF8String,n.writeVString=function(e,n){var r=typeof n=="undefined";r&&(n=this.offset);if(!this.noAssert){if(typeof e!="string")throw TypeError("Illegal str: Not a string");if(typeof n!="number"||n%1!==0)throw TypeError("Illegal offset: "+n+" (not an integer)");n>>>=0;if(n<0||n+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+n+" (+"+0+") <= "+this.buffer.byteLength)}var i=n,s,u;s=f.calculateUTF16asUTF8(o(e),this.noAssert)[1],u=t.calculateVarint32(s),n+=u+s;var a=this.buffer.byteLength;n>a&&this.resize((a*=2)>n?a:n),n-=u+s,n+=this.writeVarint32(s,n),f.encodeUTF16toUTF8(o(e),function(e){this.view.setUint8(n++,e)}.bind(this));if(n!==i+s+u)throw RangeError("Illegal range: Truncated data, "+n+" == "+(n+s+u));return r?(this.offset=n,this):n-i},n.readVString=function(e){var t=typeof e=="undefined";t&&(e=this.offset);if(!this.noAssert){if(typeof e!="number"||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");e>>>=0;if(e<0||e+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+"+1+") <= "+this.buffer.byteLength)}var n=this.readVarint32(e),r=e,i;e+=n.length,n=n.value;var s=e+n,o=u();return f.decodeUTF8toUTF16(function(){return e<s?this.view.getUint8(e++):null}.bind(this),o,this.noAssert),i=o(),t?(this.offset=e,i):{string:i,length:e-r}},n.append=function(e,n,r){if(typeof n=="number"||typeof n!="string")r=n,n=undefined;var i=typeof r=="undefined";i&&(r=this.offset);if(!this.noAssert){if(typeof r!="number"||r%1!==0)throw TypeError("Illegal offset: "+r+" (not an integer)");r>>>=0;if(r<0||r+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+r+" (+"+0+") <= "+this.buffer.byteLength)}e instanceof t||(e=t.wrap(e,n));var s=e.limit-e.offset;if(s<=0)return this;r+=s;var o=this.buffer.byteLength;return r>o&&this.resize((o*=2)>r?o:r),r-=s,(new Uint8Array(this.buffer,r)).set((new Uint8Array(e.buffer)).subarray(e.offset,e.limit)),e.offset+=s,i&&(this.offset+=s),this},n.appendTo=function(e,t){return e.append(this,t),this},n.assert=function(e){return this.noAssert=!e,this},n.capacity=function(){return this.buffer.byteLength},n.clear=function(){return this.offset=0,this.limit=this.buffer.byteLength,this.markedOffset=-1,this},n.clone=function(e){var n=new t(0,this.littleEndian,this.noAssert);if(e){var r=new ArrayBuffer(this.buffer.byteLength);(new Uint8Array(r)).set(this.buffer),n.buffer=r,n.view=new DataView(r)}else n.buffer=this.buffer,n.view=this.view;return n.offset=this.offset,n.markedOffset=this.markedOffset,n.limit=this.limit,n},n.compact=function(e,t){typeof e=="undefined"&&(e=this.offset),typeof t=="undefined"&&(t=this.limit);if(!this.noAssert){if(typeof e!="number"||e%1!==0)throw TypeError("Illegal begin: Not an integer");e>>>=0;if(typeof t!="number"||t%1!==0)throw TypeError("Illegal end: Not an integer");t>>>=0;if(e<0||e>t||t>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+t+" <= "+this.buffer.byteLength)}if(e===0&&t===this.buffer.byteLength)return this;var n=t-e;if(n===0)return this.buffer=r,this.view=null,this.markedOffset>=0&&(this.markedOffset-=e),this.offset=0,this.limit=0,this;var i=new ArrayBuffer(n);return(new Uint8Array(i)).set((new Uint8Array(this.buffer)).subarray(e,t)),this.buffer=i,this.view=new DataView(i),this.markedOffset>=0&&(this.markedOffset-=e),this.offset=0,this.limit=n,this},n.copy=function(e,n){typeof e=="undefined"&&(e=this.offset),typeof n=="undefined"&&(n=this.limit);if(!this.noAssert){if(typeof e!="number"||e%1!==0)throw TypeError("Illegal begin: Not an integer");e>>>=0;if(typeof n!="number"||n%1!==0)throw TypeError("Illegal end: Not an integer");n>>>=0;if(e<0||e>n||n>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+n+" <= "+this.buffer.byteLength)}if(e===n)return new t(0,this.littleEndian,this.noAssert);var r=n-e,i=new t(r,this.littleEndian,this.noAssert);return i.offset=0,i.limit=r,i.markedOffset>=0&&(i.markedOffset-=e),this.copyTo(i,0,e,n),i},n.copyTo=function(e,n,r,i){var s,o;if(!this.noAssert&&!t.isByteBuffer(e))throw TypeError("Illegal target: Not a ByteBuffer");n=(o=typeof n=="undefined")?e.offset:n|0,r=(s=typeof r=="undefined")?this.offset:r|0,i=typeof i=="undefined"?this.limit:i|0;if(n<0||n>e.buffer.byteLength)throw RangeError("Illegal target range: 0 <= "+n+" <= "+e.buffer.byteLength);if(r<0||i>this.buffer.byteLength)throw RangeError("Illegal source range: 0 <= "+r+" <= "+this.buffer.byteLength);var u=i-r;return u===0?e:(e.ensureCapacity(n+u),(new Uint8Array(e.buffer)).set((new Uint8Array(this.buffer)).subarray(r,i),n),s&&(this.offset+=u),o&&(e.offset+=u),this)},n.ensureCapacity=function(e){var t=this.buffer.byteLength;return t<e?this.resize((t*=2)>e?t:e):this},n.fill=function(e,t,n){var r=typeof t=="undefined";r&&(t=this.offset),typeof e=="string"&&e.length>0&&(e=e.charCodeAt(0)),typeof t=="undefined"&&(t=this.offset),typeof n=="undefined"&&(n=this.limit);if(!this.noAssert){if(typeof e!="number"||e%1!==0)throw TypeError("Illegal value: "+e+" (not an integer)");e|=0;if(typeof t!="number"||t%1!==0)throw TypeError("Illegal begin: Not an integer");t>>>=0;if(typeof n!="number"||n%1!==0)throw TypeError("Illegal end: Not an integer");n>>>=0;if(t<0||t>n||n>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+t+" <= "+n+" <= "+this.buffer.byteLength)}if(t>=n)return this;while(t<n)this.view.setUint8(t++,e);return r&&(this.offset=t),this},n.flip=function(){return this.limit=this.offset,this.offset=0,this},n.mark=function(e){e=typeof e=="undefined"?this.offset:e;if(!this.noAssert){if(typeof e!="number"||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");e>>>=0;if(e<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+"+0+") <= "+this.buffer.byteLength)}return this.markedOffset=e,this},n.order=function(e){if(!this.noAssert&&typeof e!="boolean")throw TypeError("Illegal littleEndian: Not a boolean");return this.littleEndian=!!e,this},n.LE=function(e){return this.littleEndian=typeof e!="undefined"?!!e:!0,this},n.BE=function(e){return this.littleEndian=typeof e!="undefined"?!e:!1,this},n.prepend=function(e,n,r){if(typeof n=="number"||typeof n!="string")r=n,n=undefined;var i=typeof r=="undefined";i&&(r=this.offset);if(!this.noAssert){if(typeof r!="number"||r%1!==0)throw TypeError("Illegal offset: "+r+" (not an integer)");r>>>=0;if(r<0||r+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+r+" (+"+0+") <= "+this.buffer.byteLength)}e instanceof t||(e=t.wrap(e,n));var s=e.limit-e.offset;if(s<=0)return this;var o=s-r,u;if(o>0){var a=new ArrayBuffer(this.buffer.byteLength+o);u=new Uint8Array(a),u.set((new Uint8Array(this.buffer)).subarray(r,this.buffer.byteLength),s),this.buffer=a,this.view=new DataView(a),this.offset+=o,this.markedOffset>=0&&(this.markedOffset+=o),this.limit+=o,r+=o}else u=new Uint8Array(this.buffer);return u.set((new Uint8Array(e.buffer)).subarray(e.offset,e.limit),r-s),e.offset=e.limit,i&&(this.offset-=s),this},n.prependTo=function(e,t){return e.prepend(this,t),this},n.printDebug=function(e){typeof e!="function"&&(e=console.log.bind(console)),e(this.toString()+"\n"+"-------------------------------------------------------------------\n"+this.toDebug(!0))},n.remaining=function(){return this.limit-this.offset},n.reset=function(){return this.markedOffset>=0?(this.offset=this.markedOffset,this.markedOffset=-1):this.offset=0,this},n.resize=function(e){if(!this.noAssert){if(typeof e!="number"||e%1!==0)throw TypeError("Illegal capacity: "+e+" (not an integer)");e|=0;if(e<0)throw RangeError("Illegal capacity: 0 <= "+e)}if(this.buffer.byteLength<e){var t=new ArrayBuffer(e);(new Uint8Array(t)).set(new Uint8Array(this.buffer)),this.buffer=t,this.view=new DataView(t)}return this},n.reverse=function(e,t){typeof e=="undefined"&&(e=this.offset),typeof t=="undefined"&&(t=this.limit);if(!this.noAssert){if(typeof e!="number"||e%1!==0)throw TypeError("Illegal begin: Not an integer");e>>>=0;if(typeof t!="number"||t%1!==0)throw TypeError("Illegal end: Not an integer");t>>>=0;if(e<0||e>t||t>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+t+" <= "+this.buffer.byteLength)}return e===t?this:(Array.prototype.reverse.call((new Uint8Array(this.buffer)).subarray(e,t)),this.view=new DataView(this.buffer),this)},n.skip=function(e){if(!this.noAssert){if(typeof e!="number"||e%1!==0)throw TypeError("Illegal length: "+e+" (not an integer)");e|=0}var t=this.offset+e;if(!this.noAssert)if(t<0||t>this.buffer.byteLength)throw RangeError("Illegal length: 0 <= "+this.offset+" + "+e+" <= "+this.buffer.byteLength);return this.offset=t,this},n.slice=function(e,t){typeof e=="undefined"&&(e=this.offset),typeof t=="undefined"&&(t=this.limit);if(!this.noAssert){if(typeof e!="number"||e%1!==0)throw TypeError("Illegal begin: Not an integer");e>>>=0;if(typeof t!="number"||t%1!==0)throw TypeError("Illegal end: Not an integer");t>>>=0;if(e<0||e>t||t>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+t+" <= "+this.buffer.byteLength)}var n=this.clone();return n.offset=e,n.limit=t,n},n.toBuffer=function(e){var t=this.offset,n=this.limit;if(t>n){var i=t;t=n,n=i}if(!this.noAssert){if(typeof t!="number"||t%1!==0)throw TypeError("Illegal offset: Not an integer");t>>>=0;if(typeof n!="number"||n%1!==0)throw TypeError("Illegal limit: Not an integer");n>>>=0;if(t<0||t>n||n>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+t+" <= "+n+" <= "+this.buffer.byteLength)}if(!e&&t===0&&n===this.buffer.byteLength)return this.buffer;if(t===n)return r;var s=new ArrayBuffer(n-t);return(new Uint8Array(s)).set((new Uint8Array(this.buffer)).subarray(t,n),0),s},n.toArrayBuffer=n.toBuffer,n.toString=function(e,t,n){if(typeof e=="undefined")return"ByteBufferAB(offset="+this.offset+",markedOffset="+this.markedOffset+",limit="+this.limit+",capacity="+this.capacity()+")";typeof e=="number"&&(e="utf8",t=e,n=t);switch(e){case"utf8":return this.toUTF8(t,n);case"base64":return this.toBase64(t,n);case"hex":return this.toHex(t,n);case"binary":return this.toBinary(t,n);case"debug":return this.toDebug();case"columns":return this.toColumns();default:throw Error("Unsupported encoding: "+e)}};var a=function(){var e={},t=[65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,48,49,50,51,52,53,54,55,56,57,43,47],n=[];for(var r=0,i=t.length;r<i;++r)n[t[r]]=r;return e.encode=function(e,n){var r,i;while((r=e())!==null)n(t[r>>2&63]),i=(r&3)<<4,(r=e())!==null?(i|=r>>4&15,n(t[(i|r>>4&15)&63]),i=(r&15)<<2,(r=e())!==null?(n(t[(i|r>>6&3)&63]),n(t[r&63])):(n(t[i&63]),n(61))):(n(t[i&63]),n(61),n(61))},e.decode=function(e,t){function o(e){throw Error("Illegal character code: "+e)}var r,i,s;while((r=e())!==null){i=n[r],typeof i=="undefined"&&o(r);if((r=e())!==null){s=n[r],typeof s=="undefined"&&o(r),t(i<<2>>>0|(s&48)>>4);if((r=e())!==null){i=n[r];if(typeof i=="undefined"){if(r===61)break;o(r)}t((s&15)<<4>>>0|(i&60)>>2);if((r=e())!==null){s=n[r];if(typeof s=="undefined"){if(r===61)break;o(r)}t((i&3)<<6>>>0|s)}}}}},e.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)},e}();n.toBase64=function(e,t){typeof e=="undefined"&&(e=this.offset),typeof t=="undefined"&&(t=this.limit);if(!this.noAssert){if(typeof e!="number"||e%1!==0)throw TypeError("Illegal begin: Not an integer");e>>>=0;if(typeof t!="number"||t%1!==0)throw TypeError("Illegal end: Not an integer");t>>>=0;if(e<0||e>t||t>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+t+" <= "+this.buffer.byteLength)}var n;return a.encode(function(){return e<t?this.view.getUint8(e++):null}.bind(this),n=u()),n()},t.fromBase64=function(e,n,r){if(!r){if(typeof e!="string")throw TypeError("Illegal str: Not a string");if(e.length%4!==0)throw TypeError("Illegal str: Length not a multiple of 4")}var i=new t(e.length/4*3,n,r),s=0;return a.decode(o(e),function(e){i.view.setUint8(s++,e)}),i.limit=s,i},t.btoa=function(e){return t.fromBinary(e).toBase64()},t.atob=function(e){return t.fromBase64(e).toBinary()},n.toBinary=function(e,t){e=typeof e=="undefined"?this.offset:e,t=typeof t=="undefined"?this.limit:t;if(!this.noAssert){if(typeof e!="number"||e%1!==0)throw TypeError("Illegal begin: Not an integer");e>>>=0;if(typeof t!="number"||t%1!==0)throw TypeError("Illegal end: Not an integer");t>>>=0;if(e<0||e>t||t>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+t+" <= "+this.buffer.byteLength)}if(e===t)return"";var n=[],r=[];while(e<t)n.push(this.view.getUint8(e++)),n.length>=1024&&(r.push(String.fromCharCode.apply(String,n)),n=[]);return r.join("")+String.fromCharCode.apply(String,n)},t.fromBinary=function(e,n,r){if(!r&&typeof e!="string")throw TypeError("Illegal str: Not a string");var i=0,s=e.length,o,u=new t(s,n,r);while(i<s){o=e.charCodeAt(i);if(!r&&o>255)throw RangeError("Illegal charCode at "+i+": 0 <= "+o+" <= 255");u.view.setUint8(i++,o)}return u.limit=s,u},n.toDebug=function(e){var t=-1,n=this.buffer.byteLength,r,i="",s="",o="";while(t<n){t!==-1&&(r=this.view.getUint8(t),r<16?i+="0"+r.toString(16).toUpperCase():i+=r.toString(16).toUpperCase(),e&&(s+=r>32&&r<127?String.fromCharCode(r):".")),++t;if(e&&t>0&&t%16===0&&t!==n){while(i.length<51)i+=" ";o+=i+s+"\n",i=s=""}t===this.offset&&t===this.limit?i+=t===this.markedOffset?"!":"|":t===this.offset?i+=t===this.markedOffset?"[":"<":t===this.limit?i+=t===this.markedOffset?"]":">":i+=t===this.markedOffset?"'":e||t!==0&&t!==n?" ":""}if(e&&i!==" "){while(i.length<51)i+=" ";o+=i+s+"\n"}return e?o:i},t.fromDebug=function(e,n,r){var i=e.length,s=new t((i+1)/3|0,n,r),o=0,u=0,a,f,l=!1,c=!1,h=!1,p=!1,d=!1;while(o<i){switch(a=e.charAt(o++)){case"!":if(!r){if(c||h||p){d=!0;break}c=h=p=!0}s.offset=s.markedOffset=s.limit=u,l=!1;break;case"|":if(!r){if(c||p){d=!0;break}c=p=!0}s.offset=s.limit=u,l=!1;break;case"[":if(!r){if(c||h){d=!0;break}c=h=!0}s.offset=s.markedOffset=u,l=!1;break;case"<":if(!r){if(c){d=!0;break}c=!0}s.offset=u,l=!1;break;case"]":if(!r){if(p||h){d=!0;break}p=h=!0}s.limit=s.markedOffset=u,l=!1;break;case">":if(!r){if(p){d=!0;break}p=!0}s.limit=u,l=!1;break;case"'":if(!r){if(h){d=!0;break}h=!0}s.markedOffset=u,l=!1;break;case" ":l=!1;break;default:if(!r&&l){d=!0;break}f=parseInt(a+e.charAt(o++),16);if(!r)if(isNaN(f)||f<0||f>255)throw TypeError("Illegal str: Not a debug encoded string");s.view.setUint8(u++,f),l=!0}if(d)throw TypeError("Illegal str: Invalid symbol at "+o)}if(!r){if(!c||!p)throw TypeError("Illegal str: Missing offset or limit");if(u<s.buffer.byteLength)throw TypeError("Illegal str: Not a debug encoded string (is it hex?) "+u+" < "+i)}return s},n.toHex=function(e,t){e=typeof e=="undefined"?this.offset:e,t=typeof t=="undefined"?this.limit:t;if(!this.noAssert){if(typeof e!="number"||e%1!==0)throw TypeError("Illegal begin: Not an integer");e>>>=0;if(typeof t!="number"||t%1!==0)throw TypeError("Illegal end: Not an integer");t>>>=0;if(e<0||e>t||t>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+t+" <= "+this.buffer.byteLength)}var n=new Array(t-e),r;while(e<t)r=this.view.getUint8(e++),r<16?n.push("0",r.toString(16)):n.push(r.toString(16));return n.join("")},t.fromHex=function(e,n,r){if(!r){if(typeof e!="string")throw TypeError("Illegal str: Not a string");if(e.length%2!==0)throw TypeError("Illegal str: Length not a multiple of 2")}var i=e.length,s=new t(i/2|0,n),o;for(var u=0,a=0;u<i;u+=2){o=parseInt(e.substring(u,u+2),16);if(!r)if(!isFinite(o)||o<0||o>255)throw TypeError("Illegal str: Contains non-hex characters");s.view.setUint8(a++,o)}return s.limit=a,s};var f=function(){var e={};return e.MAX_CODEPOINT=1114111,e.encodeUTF8=function(e,t){var n=null;typeof e=="number"&&(n=e,e=function(){return null});while(n!==null||(n=e())!==null)n<128?t(n&127):n<2048?(t(n>>6&31|192),t(n&63|128)):n<65536?(t(n>>12&15|224),t(n>>6&63|128),t(n&63|128)):(t(n>>18&7|240),t(n>>12&63|128),t(n>>6&63|128),t(n&63|128)),n=null},e.decodeUTF8=function(e,t){var n,r,i,s,o=function(e){e=e.slice(0,e.indexOf(null));var t=Error(e.toString());throw t.name="TruncatedError",t.bytes=e,t};while((n=e())!==null)if((n&128)===0)t(n);else if((n&224)===192)(r=e())===null&&o([n,r]),t((n&31)<<6|r&63);else if((n&240)===224)((r=e())===null||(i=e())===null)&&o([n,r,i]),t((n&15)<<12|(r&63)<<6|i&63);else{if((n&248)!==240)throw RangeError("Illegal starting byte: "+n);((r=e())===null||(i=e())===null||(s=e())===null)&&o([n,r,i,s]),t((n&7)<<18|(r&63)<<12|(i&63)<<6|s&63)}},e.UTF16toUTF8=function(e,t){var n,r=null;for(;;){if((n=r!==null?r:e())===null)break;if(n>=55296&&n<=57343&&(r=e())!==null&&r>=56320&&r<=57343){t((n-55296)*1024+r-56320+65536),r=null;continue}t(n)}r!==null&&t(r)},e.UTF8toUTF16=function(e,t){var n=null;typeof e=="number"&&(n=e,e=function(){return null});while(n!==null||(n=e())!==null)n<=65535?t(n):(n-=65536,t((n>>10)+55296),t(n%1024+56320)),n=null},e.encodeUTF16toUTF8=function(t,n){e.UTF16toUTF8(t,function(t){e.encodeUTF8(t,n)})},e.decodeUTF8toUTF16=function(t,n){e.decodeUTF8(t,function(t){e.UTF8toUTF16(t,n)})},e.calculateCodePoint=function(e){return e<128?1:e<2048?2:e<65536?3:4},e.calculateUTF8=function(t){var n,r=0;while((n=t())!==null)r+=e.calculateCodePoint(n);return r},e.calculateUTF16asUTF8=function(t){var n=0,r=0;return e.UTF16toUTF8(t,function(t){++n,r+=e.calculateCodePoint(t)}),[n,r]},e}();return n.toUTF8=function(e,t){typeof e=="undefined"&&(e=this.offset),typeof t=="undefined"&&(t=this.limit);if(!this.noAssert){if(typeof e!="number"||e%1!==0)throw TypeError("Illegal begin: Not an integer");e>>>=0;if(typeof t!="number"||t%1!==0)throw TypeError("Illegal end: Not an integer");t>>>=0;if(e<0||e>t||t>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+t+" <= "+this.buffer.byteLength)}var n;try{f.decodeUTF8toUTF16(function(){return e<t?this.view.getUint8(e++):null}.bind(this),n=u())}catch(r){if(e!==t)throw RangeError("Illegal range: Truncated data, "+e+" != "+t)}return n()},t.fromUTF8=function(e,n,r){if(!r&&typeof e!="string")throw TypeError("Illegal str: Not a string");var i=new t(f.calculateUTF16asUTF8(o(e),!0)[1],n,r),s=0;return f.encodeUTF16toUTF8(o(e),function(e){i.view.setUint8(s++,e)}),i.limit=s,i},t}typeof require=="function"&&typeof module=="object"&&module&&typeof exports=="object"&&exports?module.exports=function(){var e;try{e=require("long")}catch(n){}return t(e)}():typeof define=="function"&&define.amd?define("ByteBuffer",["Long"],function(e){return t(e)}):(e.dcodeIO=e.dcodeIO||{}).ByteBuffer=t(e.dcodeIO.Long)}(this),define("ProtoBuf",{}),define("proto",["module","text","ProtoBuf"],function(e,t){function i(e,i,s,o){var u=o.proto&&o.proto.ext||"proto",a=e.split("::"),f=a[0],l=f.split(".").pop();l.toLowerCase()==="proto"||l.toLowerCase()==="json"?l=l.toLowerCase():(f=f+"."+u,l=u);var c=a.length>1&&a[1];if(o.isBuild){var h=o.proto&&o.proto.proto2json||!1;n[f]?(n[f].moduleNames.push(e),s()):t.get(i.toUrl(f),function(t){n[f]={moduleNames:[e],ext:l,data:t,proto2json:h},s()});return}var p=r[f];if(!p){var d=function(e){return t&&t.get?t.get(i.toUrl(f),e):i([f],e)},v=function(e,t){var n=e(t);r[f]=n,c?s(n.build(c)):s(n)};d(function(e){typeof e=="object"?require(["ProtoBuf.noparse"],function(t){v(t.loadJson,e)}):l==="proto"?require(["ProtoBuf"],function(t){v(t.loadProto,e)}):require(["ProtoBuf"],function(t){t.loadJson?v(t.loadJson,e):require(["ProtoBuf.noparse"],function(t){v(t.loadJson,e)})})})}else c?s(p.build(c)):s(p)}function s(e,n){var r=n.data;if(n.ext==="proto"&&n.proto2json===!0){var i=require("ProtoBuf"),s=new i.DotProto.Parser(n.data);return r=JSON.stringify(s.parse()),"define('"+e+"', function() { return "+r+"})"}var o=t.jsEscape(r);return"define('"+e+"', function() { return '"+o+"';});"}function u(e,t,r){for(var i in n){var u=n[i].moduleNames;for(var a in u){var f=u[a];if(f===t){o[i]||(r.asModule(i,s(i,n[i])),o[i]=!0);return}}}}var n={},r={},o={};return{load:i,write:u}}),define("test.proto",[],function(){return{"package":"pack",messages:[{name:"Message1",fields:[{rule:"required",options:{},type:"string",name:"prop1",id:1},{rule:"required",options:{},type:"int32",name:"prop2",id:2}],enums:[],messages:[],options:{},oneofs:{}},{name:"Message2",fields:[{rule:"required",options:{},type:"int32",name:"prop1",id:1},{rule:"repeated",options:{},type:"Message1",name:"prop2",id:2}],enums:[],messages:[],options:{},oneofs:{}}],enums:[],imports:[],options:{},services:[]}}),define("protoify",["ByteBuffer"],function(e){function n(e,t){switch(typeof e){case"number":return e%1===0&&e>=-2147483648&&e<=2147483647?new t.Value(e):new t.Value(null,e);case"string":return new t.Value({string:e});case"boolean":return new t.Value({"boolean":e});case"object":if(e===null)return new t.Value({"null":!0});if(Object.prototype.toString.call(e)==="[object Array]"){var r=new t.Array;for(var i=0;i<e.length;++i)r.values[i]=n(e[i],t);return new t.Value({array:r})}var s=new t.Object;for(var o in e)e.hasOwnProperty(o)&&(s.keys.push(n(o,t)),s.values.push(n(e[o],t)));return new t.Value({object:s});case"undefined":return new t.Value;default:throw Error("Unsupported type: "+typeof e)}}function r(e){if(e.type===null)return undefined;switch(e.type){case"null":return null;case"array":return function(){var t=e.array.values,n=0,i=t.length,s=new Array(i);for(;n<i;++n)s[n]=r(t[n]);return s}();case"object":return function(){var t=e.object.keys,n=e.object.values,i=0,s=t.length,o={};for(;i<s;++i)o[t[i].string]=r(n[i]);return o}();default:return e[e.type]}}function i(e,r){return n(e,r).encode(t).flip().toBuffer()}var t=e.allocate(1024);return i.parse=function(e,t){return r(t.Value.decode(e))},i.performMaintenance=function(){t.capacity()>2048&&(t=e.allocate(1024))},i}),define("json.proto",[],function(){return{"package":"js",messages:[{name:"Value",fields:[{rule:"optional",options:{},type:"sint32",name:"integer",id:1,oneof:"type"},{rule:"optional",options:{},type:"double",name:"double",id:2,oneof:"type"},{rule:"optional",options:{},type:"string",name:"string",id:3,oneof:"type"},{rule:"optional",options:{},type:"bool",name:"boolean",id:4,oneof:"type"},{rule:"optional",options:{},type:"bool",name:"null",id:5,oneof:"type"},{rule:"optional",options:{},type:"Array",name:"array",id:6,oneof:"type"},{rule:"optional",options:{},type:"Object",name:"object",id:7,oneof:"type"}],enums:[],messages:[],options:{},oneofs:{type:[1,2,3,4,5,6,7]}},{name:"Array",fields:[{rule:"repeated",options:{},type:"Value",name:"values",id:1}],enums:[],messages:[],options:{},oneofs:{}},{name:"Object",fields:[{rule:"repeated",options:{},type:"Value",name:"keys",id:1},{rule:"repeated",options:{},type:"Value",name:"values",id:2}],enums:[],messages:[],options:{},oneofs:{}}],enums:[],imports:[],options:{},services:[]}}),define("json.json",[],function(){return'{\n    "package": "js",\n    "messages": [\n        {\n            "name": "Value",\n            "fields": [\n                {\n                    "rule": "optional",\n                    "options": {},\n                    "type": "sint32",\n                    "name": "integer",\n                    "id": 1,\n                    "oneof": "type"\n                },\n                {\n                    "rule": "optional",\n                    "options": {},\n                    "type": "double",\n                    "name": "double",\n                    "id": 2,\n                    "oneof": "type"\n                },\n                {\n                    "rule": "optional",\n                    "options": {},\n                    "type": "string",\n                    "name": "string",\n                    "id": 3,\n                    "oneof": "type"\n                },\n                {\n                    "rule": "optional",\n                    "options": {},\n                    "type": "bool",\n                    "name": "boolean",\n                    "id": 4,\n                    "oneof": "type"\n                },\n                {\n                    "rule": "optional",\n                    "options": {},\n                    "type": "bool",\n                    "name": "null",\n                    "id": 5,\n                    "oneof": "type"\n                },\n                {\n                    "rule": "optional",\n                    "options": {},\n                    "type": "Array",\n                    "name": "array",\n                    "id": 6,\n                    "oneof": "type"\n                },\n                {\n                    "rule": "optional",\n                    "options": {},\n                    "type": "Object",\n                    "name": "object",\n                    "id": 7,\n                    "oneof": "type"\n                }\n            ],\n            "enums": [],\n            "messages": [],\n            "options": {},\n            "oneofs": {\n                "type": [\n                    1,\n                    2,\n                    3,\n                    4,\n                    5,\n                    6,\n                    7\n                ]\n            }\n        },\n        {\n            "name": "Array",\n            "fields": [\n                {\n                    "rule": "repeated",\n                    "options": {},\n                    "type": "Value",\n                    "name": "values",\n                    "id": 1\n                }\n            ],\n            "enums": [],\n            "messages": [],\n            "options": {},\n            "oneofs": {}\n        },\n        {\n            "name": "Object",\n            "fields": [\n                {\n                    "rule": "repeated",\n                    "options": {},\n                    "type": "Value",\n                    "name": "keys",\n                    "id": 1\n                },\n                {\n                    "rule": "repeated",\n                    "options": {},\n                    "type": "Value",\n                    "name": "values",\n                    "id": 2\n                }\n            ],\n            "enums": [],\n            "messages": [],\n            "options": {},\n            "oneofs": {}\n        }\n    ],\n    "enums": [],\n    "imports": [],\n    "options": {},\n    "services": []\n}\n'}),define("test",[],function(){describe("requirejs-proto",function(){it("load builder",function(e){require(["proto!test"],function(t){var n=t.build("pack"),r=t.build("pack.Message1"),i=new n.Message1("test",1);expect(i.prop1).to.eql("test"),expect(i.prop2).to.eql(1),expect(r).to.eql(n.Message1),e()})}),it("load message",function(e){require(["proto!test::pack.Message1","proto!test::pack.Message2"],function(t,n){var r=new n(2);console.log(r),expect(r).to.have.property("prop2").with.length(0),e()})})}),describe("protobufjs",function(){var e=[1,-1,-2147483648,2147483647,.1,.2,1.234,"John",!0,!1,null,[],{},undefined,[1,.1,"John",!0,!1,null,[],{},undefined],{1:1,.1:.1,John:"John","true":!0,"false":!1,"null":null,array:[],object:{},"undefined":undefined}];it("parse proto file",function(t){require(["protoify","proto!json.proto::js"],function(n,r){e.forEach(function(e){var t=n(e,r),i=n.parse(t,r);expect(i).to.eql(e)}),t()})}),it("parse json file",function(t){require(["protoify","proto!json.json::js"],function(n,r){e.forEach(function(e){var t=n(e,r),i=n.parse(t,r);expect(i).to.eql(e)}),t()})})})}),require.config({baseUrl:".",paths:{Long:"../../bower_components/long/dist/Long",ByteBuffer:"../../bower_components/byteBuffer/dist/ByteBufferAB",ProtoBuf:"../../bower_components/protobuf/dist/ProtoBuf",text:"../../bower_components/requirejs-text/text",proto:"../../proto"}}),require(["test"],function(){mocha.globals([]).run()}),define("main",function(){}),function(e){function t(e){var t={};return t.VERSION="3.8.2",t.WIRE_TYPES={},t.WIRE_TYPES.VARINT=0,t.WIRE_TYPES.BITS64=1,t.WIRE_TYPES.LDELIM=2,t.WIRE_TYPES.STARTGROUP=3,t.WIRE_TYPES.ENDGROUP=4,t.WIRE_TYPES.BITS32=5,t.PACKABLE_WIRE_TYPES=[t.WIRE_TYPES.VARINT,t.WIRE_TYPES.BITS64,t.WIRE_TYPES.BITS32],t.TYPES={int32:{name:"int32",wireType:t.WIRE_TYPES.VARINT},uint32:{name:"uint32",wireType:t.WIRE_TYPES.VARINT},sint32:{name:"sint32",wireType:t.WIRE_TYPES.VARINT},int64:{name:"int64",wireType:t.WIRE_TYPES.VARINT},uint64:{name:"uint64",wireType:t.WIRE_TYPES.VARINT},sint64:{name:"sint64",wireType:t.WIRE_TYPES.VARINT},bool:{name:"bool",wireType:t.WIRE_TYPES.VARINT},"double":{name:"double",wireType:t.WIRE_TYPES.BITS64},string:{name:"string",wireType:t.WIRE_TYPES.LDELIM},bytes:{name:"bytes",wireType:t.WIRE_TYPES.LDELIM},fixed32:{name:"fixed32",wireType:t.WIRE_TYPES.BITS32},sfixed32:{name:"sfixed32",wireType:t.WIRE_TYPES.BITS32},fixed64:{name:"fixed64",wireType:t.WIRE_TYPES.BITS64},sfixed64:{name:"sfixed64",wireType:t.WIRE_TYPES.BITS64},"float":{name:"float",wireType:t.WIRE_TYPES.BITS32},"enum":{name:"enum",wireType:t.WIRE_TYPES.VARINT},message:{name:"message",wireType:t.WIRE_TYPES.LDELIM},group:{name:"group",wireType:t.WIRE_TYPES.STARTGROUP}},t.ID_MIN=1,t.ID_MAX=536870911,t.ByteBuffer=e,t.Long=e.Long||null,t.convertFieldsToCamelCase=!1,t.populateAccessors=!0,t.Util=function(){Object.create||(Object.create=function(e){function t(){}if(arguments.length>1)throw Error("Object.create polyfill only accepts the first parameter.");return t.prototype=e,new t});var e={};e.IS_NODE=!1;try{e.IS_NODE=typeof require=="function"&&typeof require("fs").readFileSync=="function"&&typeof require("path").resolve=="function"}catch(t){}return e.XHR=function(){var e=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}],t=null;for(var n=0;n<e.length;n++){try{t=e[n]()}catch(r){continue}break}if(!t)throw Error("XMLHttpRequest is not supported");return t},e.fetch=function(t,n){n&&typeof n!="function"&&(n=null);if(e.IS_NODE)if(n)require("fs").readFile(t,function(e,t){e?n(null):n(""+t)});else try{return require("fs").readFileSync(t)}catch(r){return null}else{var i=e.XHR();i.open("GET",t,n?!0:!1),i.setRequestHeader("Accept","text/plain"),typeof i.overrideMimeType=="function"&&i.overrideMimeType("text/plain");if(!n)return i.send(null),i.status==200||i.status==0&&typeof i.responseText=="string"?i.responseText:null;i.onreadystatechange=function(){if(i.readyState!=4)return;i.status==200||i.status==0&&typeof i.responseText=="string"?n(i.responseText):n(null)};if(i.readyState==4)return;i.send(null)}},e.isArray=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"},e}(),t.Lang={OPEN:"{",CLOSE:"}",OPTOPEN:"[",OPTCLOSE:"]",OPTEND:",",EQUAL:"=",END:";",STRINGOPEN:'"',STRINGCLOSE:'"',STRINGOPEN_SQ:"'",STRINGCLOSE_SQ:"'",COPTOPEN:"(",COPTCLOSE:")",DELIM:/[\s\{\}=;\[\],'"\(\)]/g,RULE:/^(?:required|optional|repeated)$/,TYPE:/^(?:double|float|int32|uint32|sint32|int64|uint64|sint64|fixed32|sfixed32|fixed64|sfixed64|bool|string|bytes)$/,NAME:/^[a-zA-Z_][a-zA-Z_0-9]*$/,TYPEDEF:/^[a-zA-Z][a-zA-Z_0-9]*$/,TYPEREF:/^(?:\.?[a-zA-Z_][a-zA-Z_0-9]*)+$/,FQTYPEREF:/^(?:\.[a-zA-Z][a-zA-Z_0-9]*)+$/,NUMBER:/^-?(?:[1-9][0-9]*|0|0x[0-9a-fA-F]+|0[0-7]+|([0-9]*\.[0-9]+([Ee][+-]?[0-9]+)?))$/,NUMBER_DEC:/^(?:[1-9][0-9]*|0)$/,NUMBER_HEX:/^0x[0-9a-fA-F]+$/,NUMBER_OCT:/^0[0-7]+$/,NUMBER_FLT:/^[0-9]*\.[0-9]+([Ee][+-]?[0-9]+)?$/,ID:/^(?:[1-9][0-9]*|0|0x[0-9a-fA-F]+|0[0-7]+)$/,NEGID:/^\-?(?:[1-9][0-9]*|0|0x[0-9a-fA-F]+|0[0-7]+)$/,WHITESPACE:/\s/,STRING:/(?:"([^"\\]*(?:\\.[^"\\]*)*)")|(?:'([^'\\]*(?:\\.[^'\\]*)*)')/g,BOOL:/^(?:true|false)$/i},t.Reflect=function(t){function f(e,n){var r=n.readVarint32(),i=r&7,s=r>>3;switch(i){case t.WIRE_TYPES.VARINT:do r=n.readUint8();while((r&128)===128);break;case t.WIRE_TYPES.BITS64:n.offset+=8;break;case t.WIRE_TYPES.LDELIM:r=n.readVarint32(),n.offset+=r;break;case t.WIRE_TYPES.STARTGROUP:f(s,n);break;case t.WIRE_TYPES.ENDGROUP:if(s===e)return!1;throw Error("Illegal GROUPEND after unknown group: "+s+" ("+e+" expected)");case t.WIRE_TYPES.BITS32:n.offset+=4;break;default:throw Error("Illegal wire type in unknown group "+e+": "+i)}return!0}function h(e,n){if(e&&typeof e.low=="number"&&typeof e.high=="number"&&typeof e.unsigned=="boolean"&&e.low===e.low&&e.high===e.high)return new t.Long(e.low,e.high,typeof n=="undefined"?e.unsigned:n);if(typeof e=="string")return t.Long.fromString(e,n||!1,10);if(typeof e=="number")return t.Long.fromNumber(e,n||!1);throw Error("not convertible to Long")}var n={},r=function(e,t,n){this.builder=e,this.parent=t,this.name=n,this.className},i=r.prototype;i.fqn=function(){var e=this.name,t=this;do{t=t.parent;if(t==null)break;e=t.name+"."+e}while(!0);return e},i.toString=function(e){return(e?this.className+" ":"")+this.fqn()},i.build=function(){throw Error(this.toString(!0)+" cannot be built directly")},n.T=r;var s=function(e,t,n,i){r.call(this,e,t,n),this.className="Namespace",this.children=[],this.options=i||{}},o=s.prototype=Object.create(r.prototype);o.getChildren=function(e){e=e||null;if(e==null)return this.children.slice();var t=[];for(var n=0,r=this.children.length;n<r;++n)this.children[n]instanceof e&&t.push(this.children[n]);return t},o.addChild=function(e){var t;if(t=this.getChild(e.name))if(t instanceof u.Field&&t.name!==t.originalName&&this.getChild(t.originalName)===null)t.name=t.originalName;else{if(!(e instanceof u.Field&&e.name!==e.originalName&&this.getChild(e.originalName)===null))throw Error("Duplicate name in namespace "+this.toString(!0)+": "+e.name);e.name=e.originalName}this.children.push(e)},o.getChild=function(e){var t=typeof e=="number"?"id":"name";for(var n=0,r=this.children.length;n<r;++n)if(this.children[n][t]===e)return this.children[n];return null},o.resolve=function(e,t){var r=e.split("."),i=this,s=0;if(r[s]===""){while(i.parent!==null)i=i.parent;s++}var o;do{do{o=i.getChild(r[s]);if(!o||!(o instanceof n.T)||t&&o instanceof n.Message.Field){i=null;break}i=o,s++}while(s<r.length);if(i!=null)break;if(this.parent!==null)return this.parent.resolve(e,t)}while(i!=null);return i},o.build=function(){var e={},t=this.children;for(var n=0,r=t.length,i;n<r;++n)i=t[n],i instanceof s&&(e[i.name]=i.build());return Object.defineProperty&&Object.defineProperty(e,"$options",{value:this.buildOpt()}),e},o.buildOpt=function(){var e={},t=Object.keys(this.options);for(var n=0,r=t.length;n<r;++n){var i=t[n],s=this.options[t[n]];e[i]=s}return e},o.getOption=function(e){return typeof e=="undefined"?this.options:typeof this.options[e]!="undefined"?this.options[e]:null},n.Namespace=s;var u=function(e,n,r,i,o){s.call(this,e,n,r,i),this.className="Message",this.extensions=[t.ID_MIN,t.ID_MAX],this.clazz=null,this.isGroup=!!o,this._fields=null,this._fieldsById=null,this._fieldsByName=null},a=u.prototype=Object.create(s.prototype);a.build=function(n){if(this.clazz&&!n)return this.clazz;var r=function(t,n){function f(t,n){var r={};for(var i in t)t.hasOwnProperty(i)&&(t[i]===null||typeof t[i]!="object"?r[i]=t[i]:t[i]instanceof e?n&&(r[i]=t[i].toBase64()):r[i]=f(t[i],n));return r}var r=n.getChildren(t.Reflect.Message.Field),i=n.getChildren(t.Reflect.Message.OneOf),s=function(n,s){t.Builder.Message.call(this);for(var o=0,u=i.length;o<u;++o)this[i[o].name]=null;for(o=0,u=r.length;o<u;++o){var a=r[o];this[a.name]=a.repeated?[]:null,a.required&&a.defaultValue!==null&&(this[a.name]=a.defaultValue)}if(arguments.length>0)if(arguments.length!==1||typeof n!="object"||typeof n.encode=="function"||!!t.Util.isArray(n)||n instanceof e||n instanceof ArrayBuffer||!!(t.Long&&n instanceof t.Long))for(o=0,u=arguments.length;o<u;++o)this.$set(r[o].name,arguments[o]);else{var f=Object.keys(n);for(o=0,u=f.length;o<u;++o)this.$set(f[o],n[f[o]])}},o=s.prototype=Object.create(t.Builder.Message.prototype);o.add=function(e,r,i){var s=n._fieldsByName[e];if(!i){if(!s)throw Error(this+"#"+e+" is undefined");if(!(s instanceof t.Reflect.Message.Field))throw Error(this+"#"+e+" is not a field: "+s.toString(!0));if(!s.repeated)throw Error(this+"#"+e+" is not a repeated field")}this[s.name]===null&&(this[s.name]=[]),this[s.name].push(i?r:s.verifyValue(r,!0))},o.$add=o.add,o.set=function(e,r,i){if(e&&typeof e=="object"){for(var s in e)e.hasOwnProperty(s)&&this.$set(s,e[s],i);return this}var o=n._fieldsByName[e];if(!i){if(!o)throw Error(this+"#"+e+" is not a field: undefined");if(!(o instanceof t.Reflect.Message.Field))throw Error(this+"#"+e+" is not a field: "+o.toString(!0));this[o.name]=r=o.verifyValue(r)}else this[o.name]=r;return o.oneof&&(r!==null?(this[o.oneof.name]!==null&&(this[this[o.oneof.name]]=null),this[o.oneof.name]=o.name):o.oneof.name===e&&(this[o.oneof.name]=null)),this},o.$set=o.set,o.get=function(e,r){if(r)return this[e];var i=n._fieldsByName[e];if(!!i&&i instanceof t.Reflect.Message.Field){if(i instanceof t.Reflect.Message.Field)return this[i.name];throw Error(this+"#"+e+" is not a field: "+i.toString(!0))}throw Error(this+"#"+e+" is not a field: undefined")},o.$get=o.get;for(var u=0;u<r.length;u++){var a=r[u];if(a instanceof t.Reflect.Message.ExtensionField)continue;n.builder.options.populateAccessors&&function(e){var t=e.originalName.replace(/(_[a-zA-Z])/g,function(e){return e.toUpperCase().replace("_","")});t=t.substring(0,1).toUpperCase()+t.substring(1);var r=e.originalName.replace(/([A-Z])/g,function(e){return"_"+e}),i=function(t,n){return this[e.name]=n?t:e.verifyValue(t),this},s=function(){return this[e.name]};n.getChild("set"+t)===null&&(o["set"+t]=i),n.getChild("set_"+r)===null&&(o["set_"+r]=i),n.getChild("get"+t)===null&&(o["get"+t]=s),n.getChild("get_"+r)===null&&(o["get_"+r]=s)}(a)}o.encode=function(t,r){typeof t=="boolean"&&(r=t,t=undefined);var i=!1;t||(t=new e,i=!0);var s=t.littleEndian;try{return n.encode(this,t.LE(),r),(i?t.flip():t).LE(s)}catch(o){throw t.LE(s),o}},o.calculate=function(){return n.calculate(this)},o.encodeDelimited=function(t){var r=!1;t||(t=new e,r=!0);var i=(new e).LE();return n.encode(this,i).flip(),t.writeVarint32(i.remaining()),t.append(i),r?t.flip():t},o.encodeAB=function(){try{return this.encode().toArrayBuffer()}catch(e){throw e.encoded&&(e.encoded=e.encoded.toArrayBuffer()),e}},o.toArrayBuffer=o.encodeAB,o.encodeNB=function(){try{return this.encode().toBuffer()}catch(e){throw e.encoded&&(e.encoded=e.encoded.toBuffer()),e}},o.toBuffer=o.encodeNB,o.encode64=function(){try{return this.encode().toBase64()}catch(e){throw e.encoded&&(e.encoded=e.encoded.toBase64()),e}},o.toBase64=o.encode64,o.encodeHex=function(){try{return this.encode().toHex()}catch(e){throw e.encoded&&(e.encoded=e.encoded.toHex()),e}},o.toHex=o.encodeHex,o.toRaw=function(e){return f(this,!!e)},s.decode=function(t,r){typeof t=="string"&&(t=e.wrap(t,r?r:"base64")),t=t instanceof e?t:e.wrap(t);var i=t.littleEndian;try{var s=n.decode(t.LE());return t.LE(i),s}catch(o){throw t.LE(i),o}},s.decodeDelimited=function(t,r){typeof t=="string"&&(t=e.wrap(t,r?r:"base64")),t=t instanceof e?t:e.wrap(t);if(t.remaining()<1)return null;var i=t.offset,s=t.readVarint32();if(t.remaining()<s)return t.offset=i,null;try{var o=n.decode(t.slice(t.offset,t.offset+s).LE());return t.offset+=s,o}catch(u){throw t.offset+=s,u}},s.decode64=function(e){return s.decode(e,"base64")},s.decodeHex=function(e){return s.decode(e,"hex")},o.toString=function(){return n.toString()};var l,c;return Object.defineProperty&&(Object.defineProperty(s,"$options",{value:n.buildOpt()}),Object.defineProperty(o,"$type",{get:function(){return n}})),s}(t,this);this._fields=[],this._fieldsById={},this._fieldsByName={};for(var i=0,s=this.children.length,o;i<s;i++){o=this.children[i];if(o instanceof v)r[o.name]=o.build();else if(o instanceof u)r[o.name]=o.build();else if(o instanceof u.Field)o.build(),this._fields.push(o),this._fieldsById[o.id]=o,this._fieldsByName[o.name]=o;else if(!(o instanceof u.OneOf)&&!(o instanceof y))throw Error("Illegal reflect child of "+this.toString(!0)+": "+children[i].toString(!0))}return this.clazz=r},a.encode=function(e,t,n){var r=null,i;for(var s=0,o=this._fields.length,u;s<o;++s)i=this._fields[s],u=e[i.name],i.required&&u===null?r===null&&(r=i):i.encode(n?u:i.verifyValue(u),t);if(r!==null){var a=Error("Missing at least one required field for "+this.toString(!0)+": "+r);throw a.encoded=t,a}return t},a.calculate=function(e){for(var t=0,n=0,r=this._fields.length,i,s;n<r;++n){i=this._fields[n],s=e[i.name];if(i.required&&s===null)throw Error("Missing at least one required field for "+this.toString(!0)+": "+i);t+=i.calculate(s)}return t},a.decode=function(e,n,r){n=typeof n=="number"?n:-1;var i=e.offset,s=new this.clazz,o,u,a,l;while(e.offset<i+n||n===-1&&e.remaining()>0){o=e.readVarint32(),u=o&7,a=o>>3;if(u===t.WIRE_TYPES.ENDGROUP){if(a!==r)throw Error("Illegal group end indicator for "+this.toString(!0)+": "+a+" ("+(r?r+" expected":"not a group")+")");break}if(!(l=this._fieldsById[a])){switch(u){case t.WIRE_TYPES.VARINT:e.readVarint32();break;case t.WIRE_TYPES.BITS32:e.offset+=4;break;case t.WIRE_TYPES.BITS64:e.offset+=8;break;case t.WIRE_TYPES.LDELIM:var c=e.readVarint32();e.offset+=c;break;case t.WIRE_TYPES.STARTGROUP:while(f(a,e));break;default:throw Error("Illegal wire type for unknown field "+a+" in "+this.toString(!0)+"#decode: "+u)}continue}l.repeated&&!l.options.packed?s[l.name].push(l.decode(u,e)):(s[l.name]=l.decode(u,e),l.oneof&&(this[l.oneof.name]!==null&&(this[this[l.oneof.name]]=null),s[l.oneof.name]=l.name))}for(var h=0,p=this._fields.length;h<p;++h){l=this._fields[h];if(s[l.name]===null){if(l.required){var d=Error("Missing at least one required field for "+this.toString(!0)+": "+l.name);throw d.decoded=s,d}l.defaultValue!==null&&(s[l.name]=l.defaultValue)}}return s},n.Message=u;var l=function(e,t,n,i,s,o,a,f){r.call(this,e,t,s),this.className="Message.Field",this.required=n==="required",this.repeated=n==="repeated",this.type=i,this.resolvedType=null,this.id=o,this.options=a||{},this.defaultValue=null,this.oneof=f||null,this.originalName=this.name,this.builder.options.convertFieldsToCamelCase&&!(this instanceof u.ExtensionField)&&(this.name=l._toCamelCase(this.name))};l._toCamelCase=function(e){return e.replace(/_([a-zA-Z])/g,function(e,t){return t.toUpperCase()})};var c=l.prototype=Object.create(r.prototype);c.build=function(){this.defaultValue=typeof this.options["default"]!="undefined"?this.verifyValue(this.options["default"]):null},c.verifyValue=function(n,r){r=r||!1;var i=function(e,t){throw Error("Illegal value for "+this.toString(!0)+" of type "+this.type.name+": "+e+" ("+t+")")}.bind(this);if(n===null)return this.required&&i(typeof n,"required"),null;var s;if(this.repeated&&!r){t.Util.isArray(n)||(n=[n]);var o=[];for(s=0;s<n.length;s++)o.push(this.verifyValue(n[s],!0));return o}!this.repeated&&t.Util.isArray(n)&&i(typeof n,"no array expected");switch(this.type){case t.TYPES.int32:case t.TYPES.sint32:case t.TYPES.sfixed32:return(typeof n!="number"||n===n&&n%1!==0)&&i(typeof n,"not an integer"),n>4294967295?n|0:n;case t.TYPES.uint32:case t.TYPES.fixed32:return(typeof n!="number"||n===n&&n%1!==0)&&i(typeof n,"not an integer"),n<0?n>>>0:n;case t.TYPES.int64:case t.TYPES.sint64:case t.TYPES.sfixed64:if(t.Long)try{return h(n,!1)}catch(u){i(typeof n,u.message)}else i(typeof n,"requires Long.js");case t.TYPES.uint64:case t.TYPES.fixed64:if(t.Long)try{return h(n,!0)}catch(u){i(typeof n,u.message)}else i(typeof n,"requires Long.js");case t.TYPES.bool:return typeof n!="boolean"&&i(typeof n,"not a boolean"),n;case t.TYPES["float"]:case t.TYPES["double"]:return typeof n!="number"&&i(typeof n,"not a number"),n;case t.TYPES.string:return typeof n!="string"&&!(n&&n instanceof String)&&i(typeof n,"not a string"),""+n;case t.TYPES.bytes:if(e.isByteBuffer(n))return n;return e.wrap(n,"base64");case t.TYPES["enum"]:var a=this.resolvedType.getChildren(v.Value);for(s=0;s<a.length;s++){if(a[s].name==n)return a[s].id;if(a[s].id==n)return a[s].id}i(n,"not a valid enum value");case t.TYPES.group:case t.TYPES.message:(!n||typeof n!="object")&&i(typeof n,"object expected");if(n instanceof this.resolvedType.clazz)return n;if(n instanceof t.Builder.Message){var f={};for(var s in n)n.hasOwnProperty(s)&&(f[s]=n[s]);n=f}return new this.resolvedType.clazz(n)}throw Error("[INTERNAL] Illegal value for "+this.toString(!0)+": "+n+" (undefined type "+this.type+")")},c.encode=function(n,r){if(this.type===null||typeof this.type!="object")throw Error("[INTERNAL] Unresolved type in "+this.toString(!0)+": "+this.type);if(n===null||this.repeated&&n.length==0)return r;try{if(this.repeated){var i;if(this.options.packed&&t.PACKABLE_WIRE_TYPES.indexOf(this.type.wireType)>=0){r.writeVarint32(this.id<<3|t.WIRE_TYPES.LDELIM),r.ensureCapacity(r.offset+=1);var s=r.offset;for(i=0;i<n.length;i++)this.encodeValue(n[i],r);var o=r.offset-s,u=e.calculateVarint32(o);if(u>1){var a=r.slice(s,r.offset);s+=u-1,r.offset=s,r.append(a)}r.writeVarint32(o,s-u)}else for(i=0;i<n.length;i++)r.writeVarint32(this.id<<3|this.type.wireType),this.encodeValue(n[i],r)}else r.writeVarint32(this.id<<3|this.type.wireType),this.encodeValue(n,r)}catch(f){throw Error("Illegal value for "+this.toString(!0)+": "+n+" ("+f+")")}return r},c.encodeValue=function(n,r){if(n===null)return r;switch(this.type){case t.TYPES.int32:n<0?r.writeVarint64(n):r.writeVarint32(n);break;case t.TYPES.uint32:r.writeVarint32(n);break;case t.TYPES.sint32:r.writeVarint32ZigZag(n);break;case t.TYPES.fixed32:r.writeUint32(n);break;case t.TYPES.sfixed32:r.writeInt32(n);break;case t.TYPES.int64:case t.TYPES.uint64:r.writeVarint64(n);break;case t.TYPES.sint64:r.writeVarint64ZigZag(n);break;case t.TYPES.fixed64:r.writeUint64(n);break;case t.TYPES.sfixed64:r.writeInt64(n);break;case t.TYPES.bool:typeof n=="string"?r.writeVarint32(n.toLowerCase()==="false"?0:!!n):r.writeVarint32(n?1:0);break;case t.TYPES["enum"]:r.writeVarint32(n);break;case t.TYPES["float"]:r.writeFloat32(n);break;case t.TYPES["double"]:r.writeFloat64(n);break;case t.TYPES.string:r.writeVString(n);break;case t.TYPES.bytes:if(n.remaining()<0)throw Error("Illegal value for "+this.toString(!0)+": "+n.remaining()+" bytes remaining");var i=n.offset;r.writeVarint32(n.remaining()),r.append(n),n.offset=i;break;case t.TYPES.message:var s=(new e).LE();this.resolvedType.encode(n,s),r.writeVarint32(s.offset),r.append(s.flip());break;case t.TYPES.group:this.resolvedType.encode(n,r),r.writeVarint32(this.id<<3|t.WIRE_TYPES.ENDGROUP);break;default:throw Error("[INTERNAL] Illegal value to encode in "+this.toString(!0)+": "+n+" (unknown type)")}return r},c.calculate=function(n){n=this.verifyValue(n);if(this.type===null||typeof this.type!="object")throw Error("[INTERNAL] Unresolved type in "+this.toString(!0)+": "+this.type);if(n===null||this.repeated&&n.length==0)return 0;var r=0;try{if(this.repeated){var i,s;if(this.options.packed&&t.PACKABLE_WIRE_TYPES.indexOf(this.type.wireType)>=0){r+=e.calculateVarint32(this.id<<3|t.WIRE_TYPES.LDELIM),s=0;for(i=0;i<n.length;i++)s+=this.calculateValue(n[i]);r+=e.calculateVarint32(s),r+=s}else for(i=0;i<n.length;i++)r+=e.calculateVarint32(this.id<<3|this.type.wireType),r+=this.calculateValue(n[i])}else r+=e.calculateVarint32(this.id<<3|this.type.wireType),r+=this.calculateValue(n)}catch(o){throw Error("Illegal value for "+this.toString(!0)+": "+n+" ("+o+")")}return r},c.calculateValue=function(n){if(n===null)return 0;var r;switch(this.type){case t.TYPES.int32:return n<0?e.calculateVarint64(n):e.calculateVarint32(n);case t.TYPES.uint32:return e.calculateVarint32(n);case t.TYPES.sint32:return e.calculateVarint32(e.zigZagEncode32(n));case t.TYPES.fixed32:case t.TYPES.sfixed32:case t.TYPES["float"]:return 4;case t.TYPES.int64:case t.TYPES.uint64:return e.calculateVarint64(n);case t.TYPES.sint64:return e.calculateVarint64(e.zigZagEncode64(n));case t.TYPES.fixed64:case t.TYPES.sfixed64:return 8;case t.TYPES.bool:return 1;case t.TYPES["enum"]:return e.calculateVarint32(n);case t.TYPES["double"]:return 8;case t.TYPES.string:return r=e.calculateUTF8Bytes(n),e.calculateVarint32(r)+r;case t.TYPES.bytes:if(n.remaining()<0)throw Error("Illegal value for "+this.toString(!0)+": "+n.remaining()+" bytes remaining");return e.calculateVarint32(n.remaining())+n.remaining();case t.TYPES.message:return r=this.resolvedType.calculate(n),e.calculateVarint32(r)+r;case t.TYPES.group:return r=this.resolvedType.calculate(n),r+e.calculateVarint32(this.id<<3|t.WIRE_TYPES.ENDGROUP)}throw Error("[INTERNAL] Illegal value to encode in "+this.toString(!0)+": "+n+" (unknown type)")},c.decode=function(e,n,r){var i,s;if(e!=this.type.wireType&&(r||e!=t.WIRE_TYPES.LDELIM||!this.repeated))throw Error("Illegal wire type for field "+this.toString(!0)+": "+e+" ("+this.type.wireType+" expected)");if(e==t.WIRE_TYPES.LDELIM&&this.repeated&&this.options.packed&&t.PACKABLE_WIRE_TYPES.indexOf(this.type.wireType)>=0&&!r){s=n.readVarint32(),s=n.offset+s;var o=[];while(n.offset<s)o.push(this.decode(this.type.wireType,n,!0));return o}switch(this.type){case t.TYPES.int32:return n.readVarint32()|0;case t.TYPES.uint32:return n.readVarint32()>>>0;case t.TYPES.sint32:return n.readVarint32ZigZag()|0;case t.TYPES.fixed32:return n.readUint32()>>>0;case t.TYPES.sfixed32:return n.readInt32()|0;case t.TYPES.int64:return n.readVarint64();case t.TYPES.uint64:return n.readVarint64().toUnsigned();case t.TYPES.sint64:return n.readVarint64ZigZag();case t.TYPES.fixed64:return n.readUint64();case t.TYPES.sfixed64:return n.readInt64();case t.TYPES.bool:return!!n.readVarint32();case t.TYPES["enum"]:return n.readVarint32();case t.TYPES["float"]:return n.readFloat();case t.TYPES["double"]:return n.readDouble();case t.TYPES.string:return n.readVString();case t.TYPES.bytes:s=n.readVarint32();if(n.remaining()<s)throw Error("Illegal number of bytes for "+this.toString(!0)+": "+s+" required but got only "+n.remaining());return i=n.clone(),i.limit=i.offset+s,n.offset+=s,i;case t.TYPES.message:return s=n.readVarint32(),this.resolvedType.decode(n,s);case t.TYPES.group:return this.resolvedType.decode(n,-1,this.id)}throw Error("[INTERNAL] Illegal wire type for "+this.toString(!0)+": "+e)},n.Message.Field=l;var p=function(e,t,n,r,i,s,o){l.call(this,e,t,n,r,i,s,o),this.extension};p.prototype=Object.create(l.prototype),n.Message.ExtensionField=p;var d=function(e,t,n){r.call(this,e,t,n),this.fields=[]};n.Message.OneOf=d;var v=function(e,t,n,r){s.call(this,e,t,n,r),this.className="Enum",this.object=null},m=v.prototype=Object.create(s.prototype);m.build=function(){var e={},t=this.getChildren(v.Value);for(var n=0,r=t.length;n<r;++n)e[t[n].name]=t[n].id;return Object.defineProperty&&Object.defineProperty(e,"$options",{value:this.buildOpt()}),this.object=e},n.Enum=v;var g=function(e,t,n,i){r.call(this,e,t,n),this.className="Enum.Value",this.id=i};g.prototype=Object.create(r.prototype),n.Enum.Value=g;var y=function(e,t,n,i){r.call(this,e,t,n),this.field=i};y.prototype=Object.create(r.prototype),n.Extension=y;var b=function(e,t,n,r){s.call(this,e,t,n,r),this.className="Service",this.clazz=null},w=b.prototype=Object.create(s.prototype);w.build=function(e){return this.clazz&&!e?this.clazz:this.clazz=function(e,t){var n=function(t){e.Builder.Service.call(this),this.rpcImpl=t||function(e,t,n){setTimeout(n.bind(this,Error("Not implemented, see: https://github.com/dcodeIO/ProtoBuf.js/wiki/Services")),0)}},r=n.prototype=Object.create(e.Builder.Service.prototype);Object.defineProperty&&(Object.defineProperty(n,"$options",{value:t.buildOpt()}),Object.defineProperty(r,"$options",{value:n.$options}));var i=t.getChildren(e.Reflect.Service.RPCMethod);for(var s=0;s<i.length;s++)(function(e){r[e.name]=function(n,r){try{if(!n||!(n instanceof e.resolvedRequestType.clazz)){setTimeout(r.bind(this,Error("Illegal request type provided to service method "+t.name+"#"+e.name)),0);return}this.rpcImpl(e.fqn(),n,function(n,i){if(n){r(n);return}try{i=e.resolvedResponseType.clazz.decode(i)}catch(s){}if(!i||!(i instanceof e.resolvedResponseType.clazz)){r(Error("Illegal response type received in service method "+t.name+"#"+e.name));return}r(null,i)})}catch(i){setTimeout(r.bind(this,i),0)}},n[e.name]=function(t,r,i){(new n(t))[e.name](r,i)},Object.defineProperty&&(Object.defineProperty(n[e.name],"$options",{value:e.buildOpt()}),Object.defineProperty(r[e.name],"$options",{value:n[e.name].$options}))})(i[s]);return n}(t,this)},n.Service=b;var E=function(e,t,n,i){r.call(this,e,t,n),this.className="Service.Method",this.options=i||{}},S=E.prototype=Object.create(r.prototype);S.buildOpt=o.buildOpt,n.Service.Method=E;var x=function(e,t,n,r,i,s){E.call(this,e,t,n,s),this.className="Service.RPCMethod",this.requestName=r,this.responseName=i,this.resolvedRequestType=null,this.resolvedResponseType=null};return x.prototype=Object.create(E.prototype),n.Service.RPCMethod=x,n}(t),t.Builder=function(e,t,n){var r=function(e){this.ns=new n.Namespace(this,null,""),this.ptr=this.ns,this.resolved=!1,this.result=null,this.files={},this.importRoot=null,this.options=e||{}},i=r.prototype;return i.reset=function(){this.ptr=this.ns},i.define=function(e,r){if(typeof e!="string"||!t.TYPEREF.test(e))throw Error("Illegal package: "+e);var i=e.split("."),s;for(s=0;s<i.length;s++)if(!t.NAME.test(i[s]))throw Error("Illegal package: "+i[s]);for(s=0;s<i.length;s++)this.ptr.getChild(i[s])===null&&this.ptr.addChild(new n.Namespace(this,this.ptr,i[s],r)),this.ptr=this.ptr.getChild(i[s]);return this},r.isValidMessage=function(n){if(typeof n.name!="string"||!t.NAME.test(n.name))return!1;if(typeof n.values!="undefined"||typeof n.rpc!="undefined")return!1;var i;if(typeof n["fields"]!="undefined"){if(!e.Util.isArray(n.fields))return!1;var s=[],o;for(i=0;i<n.fields.length;i++){if(!r.isValidMessageField(n.fields[i]))return!1;o=parseInt(n.fields[i].id,10);if(s.indexOf(o)>=0)return!1;s.push(o)}s=null}if(typeof n["enums"]!="undefined"){if(!e.Util.isArray(n.enums))return!1;for(i=0;i<n.enums.length;i++)if(!r.isValidEnum(n.enums[i]))return!1}if(typeof n["messages"]!="undefined"){if(!e.Util.isArray(n.messages))return!1;for(i=0;i<n.messages.length;i++)if(!r.isValidMessage(n.messages[i])&&!r.isValidExtend(n.messages[i]))return!1}if(typeof n["extensions"]!="undefined")if(!e.Util.isArray(n.extensions)||n.extensions.length!==2||typeof n.extensions[0]!="number"||typeof n.extensions[1]!="number")return!1;return!0},r.isValidMessageField=function(e){if(typeof e.rule!="string"||typeof e.name!="string"||typeof e.type!="string"||typeof e.id=="undefined")return!1;if(!t.RULE.test(e.rule)||!t.NAME.test(e.name)||!t.TYPEREF.test(e.type)||!t.ID.test(""+e.id))return!1;if(typeof e["options"]!="undefined"){if(typeof e["options"]!="object")return!1;var n=Object.keys(e.options);for(var r=0,i;r<n.length;r++)if(typeof (i=n[r])!="string"||typeof e.options[i]!="string"&&typeof e.options[i]!="number"&&typeof e.options[i]!="boolean")return!1}return!0},r.isValidEnum=function(n){if(typeof n.name!="string"||!t.NAME.test(n.name))return!1;if(typeof n.values=="undefined"||!e.Util.isArray(n.values)||n["values"].length==0)return!1;for(var r=0;r<n.values.length;r++){if(typeof n["values"][r]!="object")return!1;if(typeof n.values[r].name!="string"||typeof n.values[r].id=="undefined")return!1;if(!t.NAME.test(n.values[r].name)||!t.NEGID.test(""+n.values[r].id))return!1}return!0},i.create=function(t){if(!t)return this;e.Util.isArray(t)||(t=[t]);if(t.length==0)return this;var i=[];i.push(t);while(i.length>0){t=i.pop();if(!e.Util.isArray(t))throw Error("Not a valid namespace: "+JSON.stringify(t));while(t.length>0){var s=t.shift();if(r.isValidMessage(s)){var o=new n.Message(this,this.ptr,s.name,s.options,s.isGroup),u={};if(s.oneofs){var a=Object.keys(s.oneofs);for(var f=0,l=a.length;f<l;++f)o.addChild(u[a[f]]=new n.Message.OneOf(this,o,a[f]))}if(s.fields&&s.fields.length>0)for(f=0,l=s.fields.length;f<l;++f){var c=s.fields[f];if(o.getChild(c.id)!==null)throw Error("Duplicate field id in message "+o.name+": "+c.id);if(c.options){var h=Object.keys(c.options);for(var p=0,d=h.length;p<d;++p){if(typeof h[p]!="string")throw Error("Illegal field option name in message "+o.name+"#"+c.name+": "+h[p]);if(typeof c.options[h[p]]!="string"&&typeof c.options[h[p]]!="number"&&typeof c.options[h[p]]!="boolean")throw Error("Illegal field option value in message "+o.name+"#"+c.name+"#"+h[p]+": "+c.options[h[p]])}}var v=null;if(typeof c["oneof"]=="string"){v=u[c.oneof];if(typeof v=="undefined")throw Error("Illegal oneof in message "+o.name+"#"+c.name+": "+c.oneof)}c=new n.Message.Field(this,o,c.rule,c.type,c.name,c.id,c.options,v),v&&v.fields.push(c),o.addChild(c)}var m=[];if(typeof s.enums!="undefined"&&s.enums.length>0)for(f=0;f<s.enums.length;f++)m.push(s.enums[f]);if(s.messages&&s.messages.length>0)for(f=0;f<s.messages.length;f++)m.push(s.messages[f]);s.extensions&&(o.extensions=s.extensions,o.extensions[0]<e.ID_MIN&&(o.extensions[0]=e.ID_MIN),o.extensions[1]>e.ID_MAX&&(o.extensions[1]=e.ID_MAX)),this.ptr.addChild(o);if(m.length>0){i.push(t),t=m,m=null,this.ptr=o,o=null;continue}m=null,o=null}else if(r.isValidEnum(s)){o=new n.Enum(this,this.ptr,s.name,s.options);for(f=0;f<s.values.length;f++)o.addChild(new n.Enum.Value(this,o,s.values[f].name,s.values[f].id));this.ptr.addChild(o),o=null}else if(r.isValidService(s)){o=new n.Service(this,this.ptr,s.name,s.options);for(f in s.rpc)s.rpc.hasOwnProperty(f)&&o.addChild(new n.Service.RPCMethod(this,o,f,s.rpc[f].request,s.rpc[f].response,s.rpc[f].options));this.ptr.addChild(o),o=null}else{if(!r.isValidExtend(s))throw Error("Not a valid definition: "+JSON.stringify(s));o=this.ptr.resolve(s.ref);if(o)for(f=0;f<s.fields.length;f++){if(o.getChild(s.fields[f].id)!==null)throw Error("Duplicate extended field id in message "+o.name+": "+s.fields[f].id);if(s.fields[f].id<o.extensions[0]||s.fields[f].id>o.extensions[1])throw Error("Illegal extended field id in message "+o.name+": "+s.fields[f].id+" ("+o.extensions.join(" to ")+" expected)");var g=s.fields[f].name;this.options.convertFieldsToCamelCase&&(g=n.Message.Field._toCamelCase(s.fields[f].name)),c=new n.Message.ExtensionField(this,o,s.fields[f].rule,s.fields[f].type,this.ptr.fqn()+"."+g,s.fields[f].id,s.fields[f].options);var y=new n.Extension(this,this.ptr,s.fields[f].name,c);c.extension=y,this.ptr.addChild(y),o.addChild(c)}else if(!/\.?google\.protobuf\./.test(s.ref))throw Error("Extended message "+s.ref+" is not defined")}s=null}t=null,this.ptr=this.ptr.parent}return this.resolved=!1,this.result=null,this},i["import"]=function(t,n){if(typeof n=="string"){e.Util.IS_NODE&&(n=require("path").resolve(n));if(this.files[n]===!0)return this.reset(),this;this.files[n]=!0}if(!!t.imports&&t.imports.length>0){var r,i="/",s=!1;if(typeof n=="object"){this.importRoot=n.root,s=!0,r=this.importRoot,n=n.file;if(r.indexOf("\\")>=0||n.indexOf("\\")>=0)i="\\"}else typeof n=="string"?this.importRoot?r=this.importRoot:n.indexOf("/")>=0?(r=n.replace(/\/[^\/]*$/,""),r===""&&(r="/")):n.indexOf("\\")>=0?(r=n.replace(/\\[^\\]*$/,""),i="\\"):r=".":r=null;for(var o=0;o<t.imports.length;o++)if(typeof t["imports"][o]=="string"){if(!r)throw Error("Cannot determine import root: File name is unknown");var u=t.imports[o];if(/^google\/protobuf\//.test(u))continue;u=r+i+u;if(this.files[u]===!0)continue;/\.proto$/i.test(u)&&!e.DotProto&&(u=u.replace(/\.proto$/,".json"));var a=e.Util.fetch(u);if(a===null)throw Error("Failed to import '"+u+"' in '"+n+"': File not found");/\.json$/i.test(u)?this["import"](JSON.parse(a+""),u):this["import"]((new e.DotProto.Parser(a+"")).parse(),u)}else n?/\.(\w+)$/.test(n)?this["import"](t.imports[o],n.replace(/^(.+)\.(\w+)$/,function(e,t,n){return t+"_import"+o+"."+n})):this["import"](t.imports[o],n+"_import"+o):this["import"](t.imports[o]);s&&(this.importRoot=null)}return t.messages&&(t["package"]&&this.define(t["package"],t.options),this.create(t.messages),this.reset()),t.enums&&(t["package"]&&this.define(t["package"],t.options),this.create(t.enums),this.reset()),t.services&&(t["package"]&&this.define(t["package"],t.options),this.create(t.services),this.reset()),t["extends"]&&(t["package"]&&this.define(t["package"],t.options),this.create(t["extends"]),this.reset()),this},r.isValidService=function(e){return typeof e.name=="string"&&!!t.NAME.test(e.name)&&typeof e.rpc=="object"},r.isValidExtend=function(n){if(typeof n.ref!="string"||!t.TYPEREF.test(n.ref))return!1;var i;if(typeof n["fields"]!="undefined"){if(!e.Util.isArray(n.fields))return!1;var s=[],o;for(i=0;i<n.fields.length;i++){if(!r.isValidMessageField(n.fields[i]))return!1;o=parseInt(n.id,10);if(s.indexOf(o)>=0)return!1;s.push(o)}s=null}return!0},i.resolveAll=function(){var r;if(this.ptr==null||typeof this.ptr.type=="object")return;if(this.ptr instanceof n.Namespace){var i=this.ptr.children;for(var s=0,o=i.length;s<o;++s)this.ptr=i[s],this.resolveAll()}else if(this.ptr instanceof n.Message.Field)if(!t.TYPE.test(this.ptr.type)){if(!t.TYPEREF.test(this.ptr.type))throw Error("Illegal type reference in "+this.ptr.toString(!0)+": "+this.ptr.type);r=(this.ptr instanceof n.Message.ExtensionField?this.ptr.extension.parent:this.ptr.parent).resolve(this.ptr.type,!0);if(!r)throw Error("Unresolvable type reference in "+this.ptr.toString(!0)+": "+this.ptr.type);this.ptr.resolvedType=r;if(r instanceof n.Enum)this.ptr.type=e.TYPES["enum"];else{if(!(r instanceof n.Message))throw Error("Illegal type reference in "+this.ptr.toString(!0)+": "+this.ptr.type);this.ptr.type=r.isGroup?e.TYPES.group:e.TYPES.message}}else this.ptr.type=e.TYPES[this.ptr.type];else if(!(this.ptr instanceof e.Reflect.Enum.Value))if(this.ptr instanceof e.Reflect.Service.Method){if(!(this.ptr instanceof e.Reflect.Service.RPCMethod))throw Error("Illegal service type in "+this.ptr.toString(!0));r=this.ptr.parent.resolve(this.ptr.requestName);if(!r||!(r instanceof e.Reflect.Message))throw Error("Illegal type reference in "+this.ptr.toString(!0)+": "+this.ptr.requestName);this.ptr.resolvedRequestType=r,r=this.ptr.parent.resolve(this.ptr.responseName);if(!r||!(r instanceof e.Reflect.Message))throw Error("Illegal type reference in "+this.ptr.toString(!0)+": "+this.ptr.responseName);this.ptr.resolvedResponseType=r}else if(!(this.ptr instanceof e.Reflect.Message.OneOf)&&!(this.ptr instanceof e.Reflect.Extension))throw Error("Illegal object in namespace: "+typeof this.ptr+":"+this.ptr);this.reset()},i.build=function(e){this.reset(),this.resolved||(this.resolveAll(),this.resolved=!0,this.result=null),this.result==null&&(this.result=this.ns.build());if(!e)return this.result;var t=e.split("."),n=this.result;for(var r=0;r<t.length;r++){if(!n[t[r]]){n=null;break}n=n[t[r]]}return n},i.lookup=function(e){return e?this.ns.resolve(e):this.ns},i.toString=function(){return"Builder"},r.Message=function(){},r.Service=function(){},r}(t,t.Lang,t.Reflect),t.newBuilder=function(e){return e=e||{},typeof e["convertFieldsToCamelCase"]=="undefined"&&(e.convertFieldsToCamelCase=t.convertFieldsToCamelCase),typeof e["populateAccessors"]=="undefined"&&(e.populateAccessors=t.populateAccessors),new t.Builder(e)},t.loadJson=function(e,n,r){if(typeof n=="string"||n&&typeof n.file=="string"&&typeof n.root=="string")r=n,n=null;if(!n||typeof n!="object")n=t.newBuilder();return typeof e=="string"&&(e=JSON.parse(e)),n["import"](e,r),n.resolveAll(),n},t.loadJsonFile=function(e,n,r){if(n&&typeof n=="object")r=n,n=null;else if(!n||typeof n!="function")n=null;if(n)return t.Util.fetch(typeof e=="string"?e:e.root+"/"+e.file,function(i){if(i===null){n(Error("Failed to fetch file"));return}try{n(null,t.loadJson(JSON.parse(i),r,e))}catch(s){n(s)}});var i=t.Util.fetch(typeof e=="object"?e.root+"/"+e.file:e);return i===null?null:t.loadJson(JSON.parse(i),r,e)},t}typeof require=="function"&&typeof module=="object"&&module&&typeof exports=="object"&&exports?module.exports=t(require("bytebuffer")):typeof define=="function"&&define.amd?define("ProtoBuf.noparse",["ByteBuffer"],t):(e.dcodeIO=e.dcodeIO||{}).ProtoBuf=t(e.dcodeIO.ByteBuffer)}(this);